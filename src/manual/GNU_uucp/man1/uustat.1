''' $Id: uustat.1,v 1.1 1999/08/11 14:28:30 nakano Exp $
.TH uustat 1 "Taylor UUCP 1.06"
.SH 名称
uustat \- UUCP システム状態のチェックや制御を行う
.SH 書式
.B uustat \-a
.PP
.B uustat \-\-all
.PP
.B uustat
[
.B \-eKRiMNQ ] [
.B \-sS
system ] [
.B \-uU
user ] [
.B \-cC
command ] [
.B \-oy
hours ] [
.B \-B
lines ] [
.B \-\-executions
] [
.B \-\-kill-all
] [
.B \-\-rejuvenate-all
] [
.B \-\-prompt
] [
.B \-\-mail
] [
.B \-\-notify
] [
.B \-\-no-list
] [
.B \-\-system
system ] [
.B \-\-not-system
system ] [
.B \-\-user
user ] [
.B \-\-not-user
user ] [
.B \-\-command
command ] [
.B \-\-not-command
command ] [
.B \-\-older-than
hours ] [
.B \-\-younger-than
hours ] [
.B \-\-mail-lines
lines ]
.PP
.B uustat
[
.B \-kr
jobid ] [
.B \-\-kill
jobid ] [
.B \-\-rejuvenate
jobid ]
.PP
.B uustat \-q [
.B \-sS
system ] [
.B \-oy
hours ] [
.B \-\-system
system ] [
.B \-\-not-system
system ] [
.B \-\-older-than
hours ] [
.B \-\-younger-than
hours ]
.PP
.B uustat \-\-list [
.B \-sS
system ] [
.B \-oy
hours ] [
.B \-\-system
system ] [
.B \-\-not-system
system ] [
.B \-\-older-than
hours ] [
.B \-\-younger-than
hours ]
.PP
.B uustat \-m
.PP
.B uustat \-\-status
.PP
.B uustat \-p
.PP
.B uustat \-\-ps
.SH 解説
.I uustat
コマンドは、UUCPシステムに関するいろんな情報を表示します。また、本コマ
ンドを用いることで、
.I uucp
(1) や
.I uux
(1)で作成されたジョブ要求を取り消したり、他の制御を行ったりすることが
出来ます。

デフォルトでは、
.I uustat
は、コマンドを起動したユーザが要求したジョブをすべて表示します。これは、
.B \-\-user
オプションで自分を指定した場合の動作と同じです。


.B \-a,
.B \-\-all,
.B \-e,
.B \-\-executions,
.B \-s,
.B \-\-system,
.B \-S,
.B \-\-not-system,
.B \-u,
.B \-\-user,
.B \-U,
.B \-\-not-user,
.B \-c,
.B \-\-command,
.B \-C,
.B \-\-not-command,
.B \-o,
.B \-\-older-than,
.B \-y,
.B \-\-younger-than
のいずれかのオプションが指定されると、指定条件に合致するすべてのジョブを
表示します。

.B \-K
または
.B \-\-kill-all
オプションは、要求してから7日間経過したものすべてといったような、選択したグルー
プのジョブを削除出来ます。
.SH オプション
.I uustat
では、以下のオプションが使用可能です。
.TP 5
.B \-a, \-\-all
キューイングされたすべてのファイル転送要求を表示します。
.TP 5
.B \-e, \-\-executions
キューイングされたコマンド実行要求を表示します。キューイングされた
コマンド実行要求は、
.I uuxqt
(8) にて処理されます。
キューイングされたコマンド実行要求は、リモートシステムから転送される
ファイルを待って実行させることが可能です。これらの要求は、
.I uux
(1)を起動することで作成されます。
.TP 5
.B \-s system, \-\-system system
指定したシステムに対するジョブ要求をすべて表示します。これらのオプションは、
1回のコマンド起動時に複数指定することが可能です。
.B \-\-list
と併用した場合は、指定したシステムのものだけが表示されます。
.TP 5
.B \-S system, \-\-not-system system
指定したシステム向け以外のジョブ要求をすべて表示します。これらのオプションは、
1回のコマンド起動時に複数指定することが可能です。
.B \-\-list
と併用した場合は、指定したシステム以外のものだけが表示されます。
なお、これらのオプションは、
.B \-s
や
.B \-\-system
とは同時に指定できません。
.TP 5
.B \-u user, \-\-user user
指定したユーザのジョブ要求をすべて表示します。これらのオプションは、
1回のコマンド起動時に複数指定することが可能です。
.TP 5
.B \-U user, \-\-not-user user
指定したユーザのジョブ要求を除くジョブ要求をすべて表示します。これらの
オプションは、1 回のコマンド起動時に複数指定することが可能です。
この場合は、指定したユーザたちのジョブは表示されません。
なお、これらのオプションは、
.B \-u
や
.B \-\-user
とは同時に指定できません。
.TP 5
.B \-c command, \-\-command command
指定したコマンドの実行ジョブ要求をすべて表示します。
.B command
が
.I ALL
と指定された場合、すべての(単なるファイル転送要求ではない)コマンド実行要求
を表示します。これらのオプションは、1回のコマンド起動時に複数指定することが
可能です。
.TP 5
.B \-C command, \-\-not-command command
指定したコマンド以外の実行ジョブ要求をすべて表示します。
.B command
が
.I ALL
と指定された場合
すべての単なるファイル転送要求についてすべて表示されます。
これらのオプションは、1回のコマンド起動時に複数指定することが可能です。
なお、これらのオプションは、
.B \-c
や
.B \-\-command
とは同時に指定されません。
.TP 5
.B \-o hours, \-\-older-than hours
指定した時刻以前にキューイングされた全てのジョブを表示します。
.B \-\-list
と併用した場合は、一番古いジョブが指定した時刻以前であるシステムの
ものだけが表示されます。
.TP 5
.B \-y hours, \-\-younger-than hours
指定した時刻以降にキューイングされた全てのジョブを表示します。
.B \-\-list
と併用した場合は、一番古いジョブが指定した時刻以降であるシステムの
ものだけが表示されます。
.TP 5
.B \-k jobid, \-\-kill jobid
指定したジョブを削除します。jobidは、デフォルトの出力結果から取得可能
です。また、
.I uucp
(1) や
.I uux
(1)にて
.B \-j
または
.B \-\-jobid
オプションを付加して実行することで、当該ジョブ要求のジョブidを取得する
ことも出来ます。
ジョブの削除を行うことが出来るのは、ジョブを要求したユーザ、UUCPシス
テム管理者、もしくはスーパーユーザだけです。
.B \-k
または
.B \-\-kill
オプションは、1回のコマンド実行で複数回指定することが可能です。
.TP 5
.B \-r jobid, \-\-rejuvenate jobid
指定したジョブのジョブ要求時刻を、本コマンドを起動した時刻に変更します。
これは、
.B \-o,
.B \-\-older-than,
.B \-y,
.B \-\-younger-than
オプションの出力結果に影響を与え、自動 cleanup デーモンから守ります。
jobidは、デフォルトの出力結果から取得可能です。また、
.I uucp
(1) や
.I uux
(1)に
.B \-j
または
.B \-\-jobid
オプションを付加して実行することで、当該ジョブ要求のジョブidを取得する
ことも出来ます。
本操作を行うことが出来るのは、ジョブを要求したユーザ、UUCPシステム管
理者、もしくはスーパーユーザです。
.B \-r
または
.B \-\-rejuvenate
オプションは、1回のコマンド実行で複数回指定することが可能です。
.TP 5
.B \-q, \-\-list
要求がキューイングされている全てのリモートシステムに対する要求のステー
タス、そして対話のステータスを表示します。
.B \-s,
.B \-\-system,
.B \-S,
.B \-\-not-system,
.B \-o,
.B \-\-older-than,
.B \-y,
.B \-\-younger-than
オプションによって、表示されるシステムを制限することが可能です。
コマンドや実行するものがないシステムは表示されません。
.TP 5
.B \-m, \-\-status
すべてのリモートシステムとの対話のステータスを表示します。
.TP 5
.B \-p, \-\-ps
UUCPが保持するすべての処理のステータスを表示します。
.TP 5
.B \-i, \-\-prompt
各ジョブについて、削除するかどうかを問い合わせるよう指示します。その
問い合わせに対してユーザが
.I y
もしくは
.I Y
を先頭に含む文字列を入力した場合(y もしくは Y だけでも)、そのジョブ
は削除されます。
.TP 5
.B \-K, \-\-kill-all
各ジョブを自動的に削除します。本機能は、
.B \-\-mail
や
.B \-\-notify
オプションと組み合わせて使用することで、自動メンテナンスを行う
スクリプトを作成するのに役立ちます。
.TP 5
.B \-R, \-\-rejuvenate-all
指定した各ジョブを自動的に若返らせます。このオプションは
.B \-\-kill-all
と同時には使えません。
.TP 5
.B \-M, \-\-mail
各ジョブについて、UUCPシステム管理者に対してメールを送ります。もし
ジョブが(
.B \-\-kill-all
や
.B \-\-prompt
を用いることで)削除された場合、その旨がメールに明記されます。
.B \-\-comment
オプションで指定されたコメントについても、そのメールの中に含まれます。
ジョブが実行された場合、標準入力から入力された最初の部分がメールのメッ
セージに含まれます。
メールに含まれる行数は、
.B \-\-mail-lines
オプションで設定可能です(デフォルトでは100行です)。
標準入力からの入力データがNULLキャラクタを含む場合、そのデータはバイナリ
データであるとみなされ、メールには含まれません。
.TP 5
.B \-N, \-\-notify
各ジョブについて、要求を行ったユーザに対してメールを送ります。メール
の内容については、
.B \-M
または
.B \-\-mail
オプションで説明したものと同一です。
.TP 5
.B \-W comment, \-\-comment comment
.B \-M,
.B \-\-mail,
.B \-N,
.B \-\-notify
などのオプションでメールを送る際に、そのメールに含めるコメントを指定します。
.TP 5
.B \-B lines, \-\-mail-lines lines
.B \-M,
.B \-\-mail,
.B \-N,
.B \-\-notify
オプションは、標準入力から実行してメールを送る場合に使うオプションで、
メッセージに含める標準入力からのデータの最大行数を制御します。
デフォルトは 100 です。
.TP 5
.B \-Q, \-\-no-list
.B \-i,
.B \-\-prompt,
.B \-K,
.B \-\-kill-all,
.B \-M,
.B \-\-mail,
.B \-N
.B \-\-notify
などのオプションと同時に使用します。ジョブの表示を行わないようにします。
.TP 5
.B \-x type, \-\-debug type
特定のデバッグタイプを指定します。タイプとしては、abnormal, chat, 
handshake, uucp-proto, proto, port,config, spooldir, execute, incoming,
outgoing がありますが、
.I uustat
では、 abnormal, config,spooldir ,execute のみが意味を持ちます。
本オプションでは、コンマで区切ることで複数のデバッグタイプが指定可能です。
そして、
.B \-\-debug
オプションは、1回のコマンド起動で複数回指定可能です。
また、タイプとして数字を指定することも可能です。例えば、
.B \-\-debug 2
という指定は、
.B \-\-debug abnormal,chat
と同じ意味です。
.TP 5
.B \-I file, \-\-config file
使用するコンフィギュレーションファイルの指定を行います。ただし、
本オプションは、コンパイル条件によっては使用できないことがあります。
.B \-v, \-\-version
バージョン情報を表示して終了します。
.TP 5
.B \-\-help
ヘルプメッセージを表示して終了します。
.SH 使用例
.br
.nf
uustat --all
.fi
全てのジョブのステータスを表示します。出力例を以下に示します。
.br
.in +0.5i
.nf
bugsA027h bugs ian 04-01 13:50 Executing rmail ian@airs.com (sending 1283 bytes)
.fi
.in -0.5i
フォーマットは、以下の通りです。
.br
.in +0.5i
.nf
jobid system user queue-date command (size)
.fi
.in -0.5i
jobid は、
.B \-\-kill
もしくは
.B \-\-rejuvenate
オプションで主に使用します。
サイズは、リモートシステムにどれだけのデータが転送されるかを示します。
また、ファイル受信要求については情報がありません。
.B \-\-system,
.B \-\-not-system,
.B \-\-user,
.B \-\-not-user,
.B \-\-command,
.B \-\-not-command,
.B \-\-older-than,
.B \-\-younger-than
オプションは、ジョブの表示制御のために用いられます。

.br
.nf
uustat --executions
.fi
キューイングされたコマンド実行ジョブのステータスを表示します。出力
例を以下に示します。
.br
.in +0.5i
.nf
bugs bugs!ian 05-20 12:51 rmail ian
.fi
.in -0.5i
フォーマットは以下の通りです。
.br
.in +0.5i
.nf
system requestor queue-date command
.fi
.in -0.5i
.B \-\-system,
.B \-\-not-system,
.B \-\-user,
.B \-\-not-user,
.B \-\-command,
.B \-\-not-command,
.B \-\-older-than,
.B \-\-younger-than
オプションは、ジョブの表示制御のために用いられます。

.br
.nf
uustat --list
.fi
コマンドがキューイングされている全てのシステムのステータスを表示します。
出力例を以下に示します:
.br
.in +0.5i
.nf
bugs            4C (1 hour)   0X (0 secs) 04-01 14:45 Dial failed
.fi
.in -0.5i
この出力では、システム、キューイングされているコマンドの数、
キューイングされているコマンドのうち一番古いものの年齢、
キューイングされたローカルな実行要求の数、
キューイングされた一番古い実行要求の年齢、
一番最後の通信の日付、およびその通信のステータスが表示されています。

.br
.nf
uustat --status
.fi
全てのリモートシステムとの通信ステータスを表示します。
出力例を以下に示します:
.br
.in +0.5i
.nf
bugs           04-01 15:51 Conversation complete
.fi
.in -0.5i
この出力では、
システム、最後の通信の日付、およびその通信のステータスが表示されています。
もし最後の通信が失敗した場合は、
.I uustat
は何回そのシステムを呼び出そうとしたかを表示します。
現在、もしそのリトライ周期がそのシステムの呼び出しを止めている状態であれば、
.I uustat
は次の呼び出しが行われる時間も表示します。

.br
.nf
uustat --ps
.fi
UUCP のロックを持っている全てのプロセスのステータスを表示します。
.I uustat
は単にロックを持つプロセスに対して
.I ps
(1) を起動するだけなので、出力フォーマットはシステムに依存します。

.br
.in +0.5i
.nf
uustat --command rmail --older-than 168 --kill-all --no-list --mail --notify --comment "Queued for over 1 week"
.fi
.in -0.5i
1 週間 (168時間) 以上配達を待っている全ての
.I rmail
コマンドを削除します。該当する各コマンドに対応して、
メールが UUCP 管理者とその rmail の実行を要求したユーザに送られます。
送られるメッセージには
.B \-\-comment
オプションで与えられた文字列も含みます。
.B \-\-no-list
オプションはジョブの全てが端末に表示されないようにするため、
そのプログラムからの出力はすべてエラーメッセージになります。
.SH 関連ファイル
関連ファイル名は、コンパイル時の指定により変化します。以下に挙げるものは、
一例です。
.br
/usr/lib/uucp/config - 初期化ファイル
.br
/usr/spool/uucp -
UUCP スプールディレクトリ
.SH 関連項目
ps(1), rmail(1), uucp(1), uux(1), uucico(8), uuxqt(8)
.SH 作者
Ian Lance Taylor
(ian@airs.com)
