'\" t
.\" Copyright (c) 1993 Michael Haardt (michael@cantor.informatik.rwth-aachen.de)
.\" and 1994,1995 Alain Knaff (Alain.Knaff@imag.fr)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified, Sun Feb 26 15:00:02 1995, faith@cs.unc.edu
.\"
.\" Japanese Version Copyright (c) 1996,1997,1998 ISHIKAWA Mutsumi
.\"         all rights reserved.
.\" Translated Sun Jan 11 03:25:38 JST 1998
.\"         by ISHIKAWA Mutsumi <ishikawa@linux.or.jp>
.\"
.\" WORD:	floppy disk		フロッピーディスク
.\" WORD:	double density		倍密度
.\" WORD:	high density		高密度
.\" WORD:	extra density		拡張密度
.\" WORD:	interleaved format	インターリーブドフォーマット
.\" WORD:	media			メディア
.\" WORD:	geometry		ジオメトリ
.\" WORD:	buffer cache		バッファキャッシュ
.\" WORD:	threshold		閾値
.\" WORD:	clear			クリアー
.\"
.TH FD 4 1995-01-29 "Linux" "Linux Programmer's Manual"
.SH 名前
fd \- フロッピーディスク(floppy disk)デバイス
.SH 設定
フロッピードライブはメジャーナンバー 2 を持つブロックデバイスである。
一般的には、このデバイスのオーナーは root.floppy (オーナー root、
グループ floppy)で、モード 0660 (グループの構成員であることに
よってアクセスチェックが行われる)、または、モード 0666 (誰でもアクセス
できる) である。マイナーナンバーはデバイスのタイプ、ドライブの番号、コ
ントローラーの番号を符号化したものである。それぞれのデバイスタイプ
(これは、密度 (density) とトラックカウント (track count) の組合せである)
は、ベースとなるマイナーナンバーを持っている。このベースナンバーにその
コントローラー上のドライブナンバーを加える。もし、そのドライブが 2 番目の
コントローラーに接続されているなら、さらに 128 を加える。次のデバイス
テーブルでは、 \fIn\fP はドライブ番号を表す。
.PP
警告: もし、ドライブでサポートされているより多くのトラックを持つように
フォーマットしようとした場合、機械的なダメージを引き起こすかも知れない。
.PP
翻訳者注:
以下の表に用いられる用語は表の整形の関係から
(一行にうまく納める事ができなかったため)
から原文のままとなっています。日本語との対応は以下の通りです。
.TS
l l.
Name	名前
Capac.	容量
Cyl.	シリンダ数
Sect.	セクタ数
Heads.	ヘッダ数
Base minor #	ベースマイナーナンバー
.TE

メディアのフォーマットと容量を自動的に検出するドライブ非依存のデバイス
ファイル:
.TS
l l.
Name	Base minor #
_
\fBfd\fP\fIn\fP	0
.TE
.PP
5.25 インチ倍密度(double density)デバイスファイル:
.TS
lw(1i) l l l l l.
Name	Capac.	Cyl.	Sect.	Heads	Base minor #
_
\fBfd\fP\fIn\fP\fBd360\fP	360K	40	9	2	4
.TE
.PP
5.25 インチ高密度(high density)デバイスファイル:
.TS
lw(1i) l l l l l.
Name	Capac.	Cyl.	Sect.	Heads	Base minor #
_
\fBfd\fP\fIn\fP\fBh360\fP	360K	40	9	2	20
\fBfd\fP\fIn\fP\fBh410\fP	410K	41	10	2	48
\fBfd\fP\fIn\fP\fBh420\fP	420K	42	10	2	64
\fBfd\fP\fIn\fP\fBh720\fP	720K	80	9	2	24
\fBfd\fP\fIn\fP\fBh880\fP	880K	80	11	2	80
\fBfd\fP\fIn\fP\fBh1200\fP	1200K	80	15	2	8
\fBfd\fP\fIn\fP\fBh1440\fP	1440K	80	18	2	40
\fBfd\fP\fIn\fP\fBh1476\fP	1476K	82	18	2	56
\fBfd\fP\fIn\fP\fBh1494\fP	1494K	83	18	2	72
\fBfd\fP\fIn\fP\fBh1600\fP	1600K	80	20	2	92
.TE
.PP
3.5 インチ倍密度(double density)デバイスファイル:
.TS
lw(1i) l l l l l.
Name	Capac.	Cyl.	Sect.	Heads	Base minor #
_
\fBfd\fP\fIn\fP\fBD360\fP	360K	80	9	1	12
\fBfd\fP\fIn\fP\fBD720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBD800\fP	800K	80	10	2	120
\fBfd\fP\fIn\fP\fBD1040\fP	1040K	80	13	2	84
\fBfd\fP\fIn\fP\fBD1120\fP	1120K	80	14	2	88
.TE
.PP
3.5 インチ高密度(high density)デバイスファイル:
.TS
lw(1i) l l l l l.
Name	Capac.	Cyl.	Sect.	Heads	Base minor #
_
\fBfd\fP\fIn\fP\fBH360\fP	360K	40	9	2	12
\fBfd\fP\fIn\fP\fBH720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBH820\fP	820K	82	10	2	52
\fBfd\fP\fIn\fP\fBH830\fP	830K	83	10	2	68
\fBfd\fP\fIn\fP\fBH1440\fP	1440K	80	18	2	28
\fBfd\fP\fIn\fP\fBH1600\fP	1600K	80	20	2	124
\fBfd\fP\fIn\fP\fBH1680\fP	1680K	80	21	2	44
\fBfd\fP\fIn\fP\fBH1722\fP	1722K	82	21	2	60
\fBfd\fP\fIn\fP\fBH1743\fP	1743K	83	21	2	76
\fBfd\fP\fIn\fP\fBH1760\fP	1760K	80	22	2	96
\fBfd\fP\fIn\fP\fBH1840\fP	1840K	80	23	2	116
\fBfd\fP\fIn\fP\fBH1920\fP	1920K	80	24	2	100
.TE
.PP
3.5 インチ拡張密度(extra density)デバイスファイル:
.TS
lw(1i) l l l l l.
Name	Capac.	Cyl.	Sect.	Heads	Base minor #
_
\fBfd\fP\fIn\fP\fBE2880\fP	2880K	80	36	2	32
\fBfd\fP\fIn\fP\fBCompaQ\fP	2880K	80	36	2	36
\fBfd\fP\fIn\fP\fBE3200\fP	3200K	80	40	2	104
\fBfd\fP\fIn\fP\fBE3520\fP	3520K	80	44	2	108
\fBfd\fP\fIn\fP\fBE3840\fP	3840K	80	48	2	112
.TE
.SH 説明
\fBfd\fP スペシャルファイルはフロッピーディスクドライブにローモード
(raw mode)で
アクセスする。\fBfd\fP では、次の
.BR ioctl (2)
コールがサポートされている。
.IP \fBFDCLRPRM\fP
ドライブのメディア情報(ドライブ内のディスクのジオメトリ情報)をクリアす
る。
.IP \fBFDSETPRM\fP
ドライブのメディア情報をセットする。メディア情報はメディアが交換された
時、失われる。
.IP \fBFDDEFPRM\fP
ドライブのメディア情報(ドライブ内のディスクのジオメトリ情報)をセットす
る。メディア情報はメディアが交換された時でも失われない。これは(メディ
ア情報の)自動検出を無効にする。自動検出を再び有効にするために、
\fBFDCLRPRM\fP を発行しなければならない。
.IP \fBFDGETDRVTYP\fP
ドライブのタイプ(名前引数)を返す。それぞれのドライブタイプに適合するよ
うにフォーマットを行うため、\fBFDGETDRVTYP\fP はフォーマットをサポート
する最も古いドライブタイプのために適切な名前を返す。
.IP \fBFDFLUSH\fP
与えられたドライブのバッファキャッシュを無効にする。
.IP \fBFDSETMAXERRS\fP
エラーの報告、操作の中止、再試行、リセット、セクター毎の読み込みのため
のエラー閾値をセットする。
.IP \fBFDGETMAXERRS\fP
現在のエラー閾値を得る。
.IP \fBFDGETDRVTYP\fP
ドライブの内部名を得る。
.IP \fBFDWERRORCLR\fP
書き込みエラーの統計をクリアーする。
.IP \fBFDWERRORGET\fP
書き込みエラーの統計を読む。統計は、書き込みエラーの合計、最初の書き込
みエラーはどのディスクのどこで起こったか、そして、最後の書き込みエラー
がどのディスクのどこで起こったかという情報を含んでいる。ディスクはディ
スクの交換ごとに増えるジェネレーション番号によって識別される。
.IP \fBFDTWADDLE\fP
数ミリ秒の間ドライブのモーターのスイッチを切る。これはディスクのセクター
同士が接近しすぎているディスクのアクセスのために必要であろう。
.IP \fBFDSETDRVPRM\fP
ドライブの様々なパラメータをセットする。
.IP \fBFDGETDRVPRM\fP
(\fBFDSETDRVPRM\fP を使ってセットした)パラメータを読みだす。
.IP \fBFDGETDRVSTAT\fP
キャッシュされているドライブの状態(ディスクの交換、ライトプロテクトな
ど)を得る。
.IP \fBFDPOLLDRVSTAT\fP
ドライブをポーリングして、その状態を返す。
.IP \fBFDGETFDCSTAT\fP
フロッピーコントローラーの状態を得る。
.IP \fBFDRESET\fP
フロッピーコントローラーを信頼できる状態にリセットする。
.IP \fBFDRAWCMD\fP
フロッピーコントローラーに低レベルのコマンド(raw command)を送る。
.PP
より正確な情報のためには、フロッピーコントローラーのマニュアルはもちろ
ん、\fI<linux/fd.h>\fP と \fI<linux/fdarg.h>\fP インクルードファイルも参照のこと。
.SH ファイル
/dev/fd*
.SH 注意
様々なディスクのタイプで様々な種類のフォーマットの読み書きが許されてい
る。しかし、もしセクタ間のギャップが小さすぎるようにフロッピーがフォー
マットされたならば、トラック全体のアクセスに数秒必要になるため性能が低
下するだろう。これを防ぐためには、インターリーブド・フォーマット
(interleaved format) を用いる。
.\" .SH 著者
.\" Alain Knaff (Alain.Knaff@imag.fr), David Niemi
.\" (niemidc@clark.net), Bill Broadhurst (bbroad@netcom.com).
.SH 関連項目
.BR chown (1),
.BR floppycontrol (1),
.BR getfdprm (1),
.BR mknod (1),
.BR superformat (1),
.BR mount (8),
.BR setfdprm (8)
翻訳
.\" .SH 翻訳者
.\" 石川 睦 <ishikawa@linux.or.jp>
