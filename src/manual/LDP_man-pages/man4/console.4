.\" Copyright (c) 1994 Andries Brouwer (aeb@cwi.nl), Mon Oct 31 21:03:19 MET 1994
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" Modified, Sun Feb 26 14:58:45 1995, faith@cs.unc.edu
.\"
.\" Japanese Version Copyright (c) 1996,1997,1998 ISHIKAWA Mutsumi
.\"         all rights reserved.
.\" Translated Sun Jan  4 16:25:42 JST 1998
.\"         by ISHIKAWA Mutsumi <ishikawa@linux.or.jp>
.\" Updated Wed Jan  9 JST 2002 by Kentaro Shirakata <argrath@ub32.org>
.\"
.\" WORD:	console			コンソール
.\" WORD:	terminal		端末
.\" WORD:	virtual			仮想
.\" WORD:	major number		メジャーナンバー
.\" WORD:	minor number		マイナーナンバー
.\" WORD:	character device	キャラクターデバイス
.\" WORD:	device file		デバイスファイル
.\" WORD:	kernel			カーネル
.\" WORD:	compile			コンパイル
.\" WORD:	key mapping		キーマッピング
.\" WORD:	screen buffer		スクリーンバッファ
.\" WORD:	simulate		シミュレート
.\" WORD:	escape sequence		エスケープシーケンス
.\" WORD:	initial state		初期状態
.\" WORD:	reset			リセット
.TH CONSOLE 4 1994-10-31 "Linux" "Linux Programmer's Manual"
.SH 名前
console \- コンソール端末 (console terminal) と仮想コンソール (virtual console)
.SH 説明
Linux システムは普通、\fI/dev/tty\fP\fIn\fP (n は 1 \(<= \fIn\fP \(<=
63) と呼ばれる\fI仮想コンソール\fP (メジャーナンバー (major number)
4 マイナーナンバー (minor number) 1 から 63 のキャラクターデバイス
(character device)) を持つ。
現在のコンソールは \fI/dev/console\fP または \fI/dev/tty0\fP (メジャー
ナンバー 4 マイナーナンバー 0 のキャラクターデバイス) によっても扱える。
デバイスファイル (device file) /dev/* は普通 MAKEDEV スクリプトまたは
.BR mknod (1)
を使ってモード 0622、所有者 root.tty として作成される。
.LP
カーネル (kernel) バージョン 1.1.54 以前は、仮想コンソールの数はコンパイル時に
(tty.h 中の : #define NR_CONSOLES 8 によって) カーネルに埋め込まれていた。
そして、それを変更してコンパイルし直すことで仮想コンソールの数を変更できた。
カーネルバージョン 1.1.54 以降では仮想コンソールが必要とされる時は
すぐに動作中に作成される。
.LP
コンソール上でプロセスを開始する一般的な方法は:
(a) コンソール上で
.BR mingetty (8)
(または
.BR agetty (8))
をスタートさせることを
.RB ( inittab (5)
の中で)
.BR init (8)
に伝える。
(b) コンソール上でプロセスをスタートすることを
.BR openvt (1)
に頼む。
(c) X を開始する - X は使われていないコンソールのうち最初のものを見付け、
そこに表示を出力する。(昔ながらの
.BR doshell (8)
もある。)
.LP
コンソールを切り替える一般的な方法は: (a)コンソール \fIn\fP に切り替える
ために Alt+F\fIn\fP または Ctrl+Alt+F\fIn\fP を使う。
AltGr+F\fIn\fP を使うと、おそらくコンソール \fIn\fP+12 に切り替わる
[ここでの Alt と AltGr はそれぞれ左右の Alt キーを示す]。
(b) 現在割り当てられているコンソールを循環するために Alt + 右矢印キー
または Alt + 左矢印キーを使う。(c)
.BR chvt (1)
プログラムを使う
(キーマッピングはユーザがセットできる、
.BR loadkeys (1)
を見よ。
上で述べたキーバインドはデフォルトの設定によるものである)。
.LP
.BR deallocvt (1)
コマンド(以前は \fBdisalloc\fP という名前だった)は、
プロセスに結びつけられていないコンソールの
スクリーンバッファ (screen buffer) のために使われているメモリを解放する。
.SS 特性
コンソールは多くの状態をもっている。
私は、それについていつかドキュメントにしたいと考えている。
もっとも重要な事実はコンソールは vt100 端末を真似ている
(シミュレートしている) ということである。
コンソールは ESC c という二つの文字を印字する事によって、
初期状態にリセットされる。
エスケープシーケンス (escape sequences) については
.BR console_codes (4)
で全て説明してある。
.SH ファイル
.I /dev/console
.br
.I /dev/tty*
.SH 関連項目
.BR chvt (1),
.BR deallocvt (1),
.BR loadkeys (1),
.BR mknod (1),
.BR openvt (1),
.BR console_codes (4),
.BR console_ioctl (4),
.BR tty (4),
.BR ttyS (4),
.BR charsets (7),
.BR agetty (8),
.BR init (8),
.BR mapscrn (8),
.BR mingetty (8),
.BR resizecons (8),
.BR setfont (8)
