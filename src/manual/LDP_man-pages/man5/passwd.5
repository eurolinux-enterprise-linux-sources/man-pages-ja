.\" Copyright (c) 1993 Michael Haardt (michael@moria.de),
.\"     Fri Apr  2 11:32:09 MET DST 1993
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified Sun Jul 25 10:46:28 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Aug 21 18:12:27 1994 by Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Jun 18 01:53:57 1995 by Andries Brouwer (aeb@cwi.nl)
.\" Modified Mon Jan  5 20:24:40 MET 1998 by Michael Haardt
.\"  (michael@cantor.informatik.rwth-aachen.de)
.\"
.\" Japanese Version Copyright (c) 1997 Kazuyuki Tanisako
.\"         all rights reserved.
.\" Translated 1998-02-10, Kazuyuki Tanisako <tanisako@osa.dec-j.co.jp>
.\" Updated 1998-09-23, Kazuyuki Tanisako <tanisako@osa.dec-j.co.jp>
.\" Updated 2006-07-19, Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>, LDP v2.36
.\"
.TH PASSWD 5 1998-01-05 "Linux" "Linux Programmer's Manual"
.SH 名前
passwd \- パスワードファイル
.SH 説明
.B passwd
ファイルは、そのシステムのアカウントリストを保持するテキストファイルである。
アカウント毎に、ユーザー ID、グループ ID、ホームディレクトリ、
使用する shell コマンドの種類、等の有用な情報を提供している。
また、各アカウントの暗号化されたパスワードを保持する場合もある。
パスワードファイルのアクセス許可は、全ユーザーに
読み出しの許可を与え
.RI ( ls (1)
等の多くのユーティリティではユーザー ID をユーザー名に
対応させるのに
.B passwd
ファイルを使用する)、
書き込み許可はスーパーユーザーにのみ与えるようにすべきである。
.PP
古き良き時代には、この全ユーザーに対する読み取り許可は
特別な問題を起こさなかった。誰でも暗号化されたパスワードを
読むことが出来たが、上手に選ばれたパスワードを破るのには
当時のハードウェアの速度はあまりに遅かったし、それに加えて
友好的なユーザー社会であることを基本的な前提としていた。
最近では多くの人が、何らかのバージョンの shadow password suite
(シャドウ・パスワード機能を実現するためのプログラム群)
を動かしている。その場合
.I /etc/passwd
ファイルのパスワード欄には、暗号化されたパスワードの代わりに
アスタリスク (*) が設定される。暗号化されたパスワードは
.I /etc/shadow
ファイルに保持される。
.I /etc/shadow
ファイルはスーパーユーザーだけが読み出すことができる。
.PP
shadow password が使われているかどうかにはよらず、多くのシステム
管理者は、暗号化パスワード欄にアスタリスクを設定することで、
そのユーザーがパスワードでの認証が受けられないようにしている
(下記の「注意」の項を参照)。
.PP
新しいユーザーを登録する場合には、パスワード欄にアスタリスクを設定しておき
.BR passwd (1)
コマンドにより設定を行うようにする。
.PP
パスワードファイルは 1 行ごとに 1 エントリを持ち、
各行の書式は以下の通りである:
.sp
.RS
account:password:UID:GID:GECOS:directory:shell
.RE
.sp
各欄の説明:
.RS
.TP 1.0in
.I account
そのシステムでのユーザー名。大文字を含まないようにする。
.TP
.I password
ユーザーの暗号化されたパスワード、アスタリスク、または文字 \(aqx\(aq
(\(aqx\(aq の説明については
.BR pwconv (8)
を参照)。
.TP
.I UID
ユーザー ID 番号。
.TP
.I GID
ユーザーが属するプライマリグループ ID 番号。
.TP
.I GECOS
本欄は省略可能で、情報提供の目的のみに使われる。
ユーザーのフルネームを設定することが多い。GECOS は General Electric
Comprehensive Operating System を意味しており、GE 社の大規模システム部門
が Honeywell 社に売却された際に GCOS へと変更された。Dennis Ritchie 氏は
次のように言っている:「時々プリンタ出力や、
バッチジョブを GCOS マシンに送ったりするが、
パスワードファイルの gcos 欄は $IDENT カード用の情報を
隠しておくための場所なんだ。まるっきりエレガントじゃない。」
.TP
.I directory
ユーザーの
.B $HOME
ディレクトリ。
.TP
.I shell
ログイン時に動くプログラム名 (空欄の場合
.I /bin/sh
が使われる)。
存在しない実行プログラムが設定された場合、
.BR login (1)
によるシステムへのログインはできなくなる。
.RE
.SH ファイル
.I /etc/passwd
.SH 注意
ユーザーグループを作りたい場合には、同じグループに属する
ユーザーの GID は同じ値とし、その GID を \fI/etc/group\fP の中に
定義しておく必要がある。そうしないとグループを作ったことにはならない。
.PP
暗号化パスワードとしてアスタリスクを設定すると、
.BR login (1)
を使ってのログインができなくなるが、
.BR rlogin (1)
ではまだログインができるし、
.BR rsh (1),
.BR cron (8),
.BR at (1)
やメイルのフィルタ等を使い、現存するプロセスを
実行させたり、新たなプロセスを起動したりすることができる。
使用する shell の欄を、単に変更することでアカウントを
使えないようにするのも同様の結果となる。その場合にはさらに
.BR su (1)
も有効なまま残ってしまう。
.SH 関連項目
.BR login (1),
.BR passwd (1),
.BR su (1),
.BR getpwent (3),
.BR getpwnam (3),
.BR group (5),
.BR shadow (5)
