.\" Copyright (c) 1991, 92, 93, 94, 95, 96, 1997 Free Software Foundation
.\" See section COPYING for conditions for redistribution
.\"
.\" Japanese Version Copyright (c) 1997-2000 NAKANO Takeo all rights reserved.
.\" Translated Wed Jan 7 1998 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\" Updated Fri 27 Oct 2000 by NAKANO Takeo
.\"
.TH ld 1 "17 August 1992" "cygnus support" "GNU Development Tools"
.de BP
.sp
.ti \-.2i
\(**
..

.SH 名前
ld \- GNU リンカ

.SH 書式
.hy 0
.na
.TP
.B ld 
.RB "[\|" \-o "
.I output\c
\&\|] \c
.I objfile\c
\&.\|.\|.
.br
.RB "[\|" \-A\c
.I architecture\c
\&\|] 
.RB "[\|" "\-b\ "\c
.I input-format\c
\&\|] 
.RB "[\|" \-Bstatic "\|]"  
.RB "[\|" \-Bdynamic "\|]"  
.RB "[\|" \-Bsymbolic "\|]"  
.RB "[\|" "\-c\ "\c
.I commandfile\c
\&\|] 
.RB "[\|" \-\-cref "\|]"
.RB "[\|" \-d | \-dc | \-dp\c
\|]
.br
.RB "[\|" "\-defsym\ "\c
.I symbol\c
\& = \c
.I expression\c
\&\|]
.RB "[\|" "\-e\ "\c
.I entry\c
\&\|] 
.RB "[\|" \-embedded\-relocs "\|]"
.RB "[\|" \-E "\|]" 
.RB "[\|" \-export\-dynamic "\|]"
.RB "[\|" "\-f\ "\c
.I name\c
\&\|]
.RB "[\|" "\-\-auxiliary\ "\c
.I name\c
\&\|]
.RB "[\|" "\-F\ "\c
.I name\c
\&\|]
.RB "[\|" "\-\-filter\ "\c
.I name\c
\&\|]
.RB "[\|" "\-format\ "\c
.I input-format\c
\&\|] 
.RB "[\|" \-g "\|]" 
.RB "[\|" \-G
.I size\c
\&\|]
.RB "[\|" "\-h\ "\c
.I name\c
\&\|]
.RB "[\|" "\-soname\ "\c
.I name\c
\&\|]
.RB "[\|" \-\-help "\|]"
.RB "[\|" \-i "\|]"
.RB "[\|" \-l\c
.I ar\c
\&\|] 
.RB "[\|" \-L\c
.I searchdir\c
\&\|] 
.RB "[\|" \-M "\|]" 
.RB "[\|" \-Map
.I mapfile\c
\&\|] 
.RB "[\|" \-m
.I emulation\c
\&\|] 
.RB "[\|" \-n | \-N "\|]" 
.RB "[\|" \-noinhibit-exec "\|]" 
.RB "[\|" \-no\-keep\-memory "\|]" 
.RB "[\|" \-no\-warn\-mismatch "\|]"
.RB "[\|" "\-oformat\ "\c
.I output-format\c
\&\|] 
.RB "[\|" "\-R\ "\c
.I filename\c
\&\|]
.RB "[\|" \-relax "\|]"
.RB "[\|" \-r | \-Ur "\|]" 
.RB "[\|" "\-rpath\ "\c
.I directory\c
\&\|]
.RB "[\|" "\-rpath\-link\ "\c
.I directory\c
\&\|]
.RB "[\|" \-S "\|]" 
.RB "[\|" \-s "\|]" 
.RB "[\|" \-shared "\|]" 
.RB "[\|" \-sort\-common "\|]" 
.RB "[\|" "\-split\-by\-reloc\ "\c
.I count\c
\&\|]
.RB "[\|" \-split\-by\-file "\|]" 
.RB "[\|" "\-T\ "\c
.I commandfile\c
\&\|]  
.RB "[\|" "\-Ttext\ "\c
.I textorg\c
\&\|] 
.RB "[\|" "\-Tdata\ "\c
.I dataorg\c
\&\|] 
.RB "[\|" "\-Tbss\ "\c
.I bssorg\c
\&\|]
.RB "[\|" \-t "\|]" 
.RB "[\|" "\-u\ "\c
.I sym\c
\&]
.RB "[\|" \-V "\|]"
.RB "[\|" \-v "\|]"
.RB "[\|" \-\-verbose "\|]"
.RB "[\|" \-\-version "\|]"
.RB "[\|" \-warn\-common "\|]" 
.RB "[\|" \-warn\-constructors "\|]" 
.RB "[\|" \-warn\-multiple\-gp "\|]" 
.RB "[\|" \-warn\-once "\|]" 
.RB "[\|" \-warn\-section\-align "\|]" 
.RB "[\|" \-\-whole\-archive "\|]" 
.RB "[\|" \-\-no\-whole\-archive "\|]" 
.RB "[\|" "\-\-wrap\ "\c
.I symbol\c
\&\|]
.RB "[\|" \-X "\|]" 
.RB "[\|" \-x "\|]" 
.ad b
.hy 1
.SH 説明
.B ld
は複数のオブジェクトファイルや書庫 (archive) ファイルを結合し、それら
のデータをリロケートして、シンボルの参照をまとめる。新たな実行
プログラムをコンパイルして作成する作業の最終ステップは、多くの場合
.B ld
の呼び出しとなる。

.B ld
はリンカコマンド言語のファイルを受け付ける。このファイルでリンク処理を明
示的に、また完全に制御することができる。この man ページではコマンド言
語を説明していない。コマンド言語や GNU リンカのその他の内容に関する詳
細は \fBinfo\fP の `\fBld\fP' エントリか、マニュアルである
.I ld: the GNU linker
を参照すること。

.B ld
の本バージョンではオブジェクトファイル関連の作業に汎用の BFD ライブラ
リを用いている。これによって \fBld\fP では多くの異なるフォーマットのオ
ブジェクトファイルを読み、書き、結合することができるようになっている (
例えば COFF や \fBa.out\fP)。異なるフォーマットをリンクして、あらゆる
種類のオブジェクトファイルを作成できる。サポートされているフォーマット
や関連するアーキテクチャに関しては `\fB objdump \-i\fP' を実行すればよ
い。詳細は
.BR objdump ( 1 )
を見よ。

GNU リンカは柔軟であるだけでなく、診断 (diagnostic) メッセージ
も他のリンカより詳しい。多くのリンカはエラーが生じるとすぐに動作を停
止してしまうが、
.B ld
は可能な限り処理を続け、他のエラーに関しても知らせようとする (あるいは
エラーにもかかわらず出力ファイルを作成してしまうことさえある)。

GNU リンカ
.B ld
は多くの状況をカバーするように作成されている。また他のリンカとできる限
り互換性を保つようにしてある。したがって \fBld\fP の振る舞いは、コマン
ドラインや環境変数によって細かく制御できるようになっている。

.SH オプション
コマンドラインオプションのあまりの多さに怖気づくかもしれないが、実際の
作業で指定されるオプションは、ほとんどの場合少ない。例として
.B ld
の良く用いられる例、サポートされている標準的な Unix システムで標準 
Unix のオブジェクトファイルを作成する場合を考えよう。このようなシステ
ムで
.B hello.o
ファイルをリンクする作業は以下のようになる。
.sp
.br
$\ ld\ \-o\ output\ /lib/crt0.o\ hello.o\ \-lc
.br
.sp
この例では
.B ld
に
.B output
という名前のファイルを作成するように命令している。リンクするファイルは
.B /lib/crt0.o
、
.B hello.o
および標準的な検索ディレクトリにあるライブラリ
.B libc.a
である。

.B ld
のコマンドラインオプションは任意の順序で指定でき、必要なだけ繰り返すこ
とができる。オプションの繰り返しは、多くの場合最初のもの以外を無視する
か、先の指定 (コマンドラインの左にあるもの) を上書きするかになる。

\c
例外 (複数回の指定が意味を持つもの) は以下の通り。
.BR \-A 、 \-b " (またはその同義である " \-format ")、"
.BR \-defsym 、 \-L 、 \-l 、 \-R 、 \-u 。

リンクする (複数の) オブジェクトファイルは
.I objfile
として与えるが、これはコマンドラインでオプションの後、前、あるいは混ぜ
て置いても構わない。ただし
.I objfie
をオプションのフラグとその引数の間に置くことはできない。

通常リンカの実行には最低一つのオブジェクトファイルが指定されるが、異な
るフォーマットを持つバイナリファイルを
.BR \-l 、 \-R
やスクリプトコマンド言語で指定することもできる。バイナリの入力ファイル
が\fI一つも\fP指定されない場合には、リンカは出力ファイルを作成せず、
`\fB No input files\fP' というメッセージを表示する。

オプションの引数はオプション文字の直後にスペースなしで続けることもでき
るし、オプションの次に別の引数として置くこともできる。

.TP
.BI "-A" "architecture"
.B ld
のこのリリースでは、このオプションは Intel 960 アーキテクチャのファミ
リに対してのみ意味を持つ。このファミリ向けに設定された
.B ld
では、
.I architecture
引数は 960 ファミリのメンバーを示す 2 文字の名前のどれかを指定する。このオ
プションは出力ターゲットを指定し、入力ファイルにある非互換な命令全てに
対して警告メッセージを表示する。またリンカが書庫ライブラリを検索する
方法を変更し、指定されたアーキテクチャに特有のライブラリが利用できるよ
うにする。これは検索するファイルに、アーキテクチャを示す文字列を後置
したものを加えることによってなされる。

例えば使用している
.B ld
のコマンドラインに
.B \-ACA
または
.B \-ltry
があれば、リンカは組み込みの検索パスと \fB\-L\fP で指定されたパスを
探し、以下のような名前のライブラリを見つけようとする。
.sp
.br
try
.br
libtry.a
.br
tryca
.br
libtryca.a
.br
.sp

最初の二つはどんな場合でも検索されるものであり、後の二つは
.B \-ACA
を用いたことによって加わったものである。

.B ld
の将来のリリースでは、同じような機能が他のアーキテクチャファミリでもサ
ポートされる可能性がある。

.B \-A
オプションはコマンドラインで複数回用いられると、それぞれが意味を持つ。
ただしアーキテクチャファミリがターゲットの組み合わせを許す場合に限られ
る。それぞれの指定によって、
.B \-l
で指定されたライブラリに名前のバリエーションを付けたものが検索される。

.TP
.BI "\-b " "input-format"
コマンドラインでこのオプションに続いて指定された入力オブジェクトファイ
ルのバイナリフォーマットを指定する。通常この指定は必要ない。
.B ld
はそれぞれのマシンで最も一般的なフォーマットをデフォルトの入力フォーマッ
トとするように設定されているからである。
.I input-format
はテキスト文字列で、 BFD ライブラリによってサポートされている特定のフォー
マットの名前である。
.B \-format
.I input\-format
はスクリプトコマンド
.B TARGET
と同じ効力を持つ。

一般的なバイナリフォーマットではないファイルをリンクする場合に、このオ
プションを指定することになる。また異なるフォーマットのオブジェクトファ
イルをリンクする際に、フォーマットを明示的に変更する目的に
.B \-b
を使うこともできる。この際には
.B \-b
.I input\-foramt
をそれぞれのフォーマットに属するオブジェクトファイル群の前に挿入する。

デフォルトのフォーマットは環境変数
.B GNUTARGET
から取得される。スクリプトでコマンド
.B TARGET
を用いて入力フォーマットを設定することもできる。

.TP
.B \-Bstatic 
共有ライブラリに対するリンクをしない。これは共有ライブラリをサポートし
ているプラットフォームにおいてのみ意味を持つ。

.TP
.B \-Bdynamic
動的ライブラリに対してリンクする。これは共有ライブラリをサポートしてい
るプラットフォームにおいてのみ意味を持つ。そのようなプラットフォームで
はこのオプションは通常デフォルトになっている。

.TP
.B \-Bsymbolic
共有ライブラリを作る場合、グローバルシンボルへの参照を共有ライブラリ内
部の定義 (definition) と結合する。共有ライブラリにリンクされるプログ
ラムでは、通常この共有ライブラリ内部の定義を上書きすることができる。こ
のオプションが意味を持つのは共有ライブラリをサポートする ELF プラット
フォームのみである。

.TP
.BI "\-c " "commandfile"
.I commandfile
からリンクコマンドを読むように
.B ld
に指示する。これらのコマンドは
.B ld
デフォルトのリンクフォーマットを完全に上書きする (デフォルトに追加され
るわけではない)。
.I commandfile
ではターゲットフォーマットに関して必要な記述がすべてされていなければな
らない。

リンクコマンドのスクリプトは、コマンドラインでも指定できる。これにはス
クリプトの文字列をブラケット (`\fB{\fP' と `\fB}\fP') で囲う。

.TP
.B \-\-cref
クロスリファレンスのテーブルを出力する。リンカのマップファイルが生成さ
れる場合には、クロスリファレンステーブルはマップファイルに出力される。
それ以外の場合には標準出力に表示される。

.TP
.B \-d 
.TP
.B \-dc
.TP
.B \-dp
これらの 3 つのオプションは等価である。複数の形式があるのは他のリンカ
との互換性のためである。これらのいずれかを指定すると、
.B ld
はリロケータブル出力ファイルが指定 (\fB\-r\fP) された場合でも共通シン
ボルのための領域を割り当てる。スクリプトコマンド
.B FORCE_COMMON_ALLOCATION
が同じ効力を持つ。

.TP
.BI "\-defsym " "symbol" "\fR = \fP" expression
.I expression
によって与えられた絶対アドレスを含むグローバルシンボルを出力ファイルに
生成する。このオプションは必要なだけコマンドラインに指定でき、複数のシ
ンボルを定義することができる。
.I expression
の指定には簡単な算術もサポートされている。 16 進定数や存在する他のシン
ボルを与えたり、 \fB+\fP や \fB\-\fP をそれらの間の足し引きに用いるこ
ともできる。より手の込んだ数式が必要な場合には、スクリプトでリンカコマ
ンド言語を用いることをすすめる。

.TP
.BI "\-e " "entry"\c
.I entry
をプログラムのエントリポイントを示す
.\" explicit な
シンボルとして取り扱う (デフォルトのエントリポイントを上書きする)。
デフォルトと他のエントリポイントの指定方法については ld の info の
*Note Entry Point:: を参照すること。

.TP
.B \-embedded\-relocs
このオプションが意味を持つのは GNU コンパイラやアセンブラの
.B \-membedded\-pic
オプションによって生成された MIPS embedded な PIC コードをリンクする場
合だけである。これはリンカにテーブルを生成させる。このテーブルは、ポイ
ンタ値に対して static に初期化された全てのデータを実行時にリロケートす
る際に用いられる。詳細は testsuite/ld\-empic 内部のコードを参照のこと。

.TP
.B \-E
.TP
.B \-export\-dynamic
ELF ファイルを作成する際に、全てのシンボルをダイナミックなシンボルテー
ブルに追加する。通常ダイナミックシンボルテーブルには動的なオブジェクト
によって用いられるシンボルのみが含まれている。このオプションは
.I dlopen
を使う場合などに必要となる。

.TP
.BI "\-f " "name"
.TP
.BI "\-\-auxiliary " "name"
ELF 共有オブジェクトを作成する際に、内部の DT_AUXILIARY フィールドを指
定した名前に設定する。この指定によって、ダイナミックリンカは扱っている
共有オブジェクトのシンボルテーブルを、他の共有オブジェクト
.I name
のシンボルテーブルの補助フィルタとして用いるようになる。

.TP
.BI "\-F " "name"
.TP
.BI "\-\-filter " "name"
ELF 共有オブジェクトを作成する際に、内部の DT_FILTER フィールドを指
定した名前に設定する。この指定によって、ダイナミックリンカはその
共有オブジェクトのシンボルテーブルを、他の共有オブジェクト
.I name
のシンボルテーブルのフィルタとして用いるようになる。

.TP
.BI "\-format " "input\-format"
.B \-b
.I input\-format
と同義。

.TP
.B \-g
受け付けるが無視される。他のツールとの互換性のために用意されている。

.TP
.BI "\-G " "size"\c
MIPS ECOFF において、 GP レジスタを用いて最適化するオブジェクトの最大
サイズを
.I size
に設定する。他のオブジェクトファイルフォーマットでは無視される。

.TP
.BI "\-h " "name"
.TP
.BI "\-soname " "name"
ELF 共有オブジェクトを作成するとき、内部の DT_SONAME フィールドを指定
した名前に設定する。実行ファイルが DT_SONAME フィールドを持つ共有オブ
ジェクトとリンクされると、これの実行時にダイナミックリンカは 
DT_SONAME によって指定された共有オブジェクトをロードしようとする (通常
はリンカに対して指定されたファイルをロードする)。

.TP
.B \-\-help
コマンドラインオプションの要約を標準出力に表示して終了する。このオプショ
ンと
.B \-\-version
は、他の GNU プログラムとの互換性のためダッシュ (\-) 二つで始まる。こ
れ以外のオプションは他のリンカとの互換性のためダッシュ一つで始まる。

.TP
.B \-i
インクリメンタルリンクを実行する (オプション \fB\-r\fP と同じ)。

.TP
.BI "\-l" "ar"\c
アーカイブファイル
.I ar
をリンクするファイルのリストに加える。このオプションは何回でも指定でき
る。
.B ld
は \fIar\fP が指定されるごとに、 \fBlib\fIar\fR.a が見つかるまで検索パ
スを探す。

.TP
.BI "\-L" "searchdir"
このコマンドは
.I searchdir
を
.B ld
の書庫ライブラリの検索パスに追加する。このオプションは必要なだけ指定で
きる。

デフォルトの検索パス (\fB\-L\fP が指定されなかったときの検索パス) は
.B ld
が用いているエミュレーションのモードに依存する。また設定に依存する場合
もある。リンクスクリプトでは
.B SEARCH_DIR
コマンドを用いてこのパスを設定することもできる。

.TP
.B \-M 
標準出力にリンクマップを表示する。リンクマップには
.B ld
によってマップされたシンボルの位置情報とグローバルな共通メモリ領域の
割当て情報が含まれている。

.TP
.BI "\-Map " "mapfile"\c
ファイル
.I mapfile
にリンクマップを出力する。リンクマップには
.B ld
によってマップされたシンボルの位置情報とグローバルな共通 storage の
割当て情報が含まれている。

.TP
.BI "\-m " "emulation"\c
リンカ
.I emulation
をエミュレートする。エミュレートできるもののリストは
.I \-\-verbose
または
.I \-V
で得られる。このオプションはコンパイル時のデフォルト (\fBld\fP 
の設定を行ったシステム向けのリンカ) を上書きする。

.TP
.B \-N 
.B text
と
.B data
セクションを読み書き可能にする。出力フォーマットが Unix スタイルのマジッ
ク・ナンバーをサポートしている場合は、出力ファイルに
.B OMAGIC
がマークされる。

.B \-N
オプションを指定するとリンカは data セグメントのページ位置調整を行わな
い。

.TP
.B \-n 
text セグメントをリードオンリーにする。可能な場合は
.B NMAGIC
が書き込まれる。

.TP
.B \-noinhibit\-exec
通常リンカはリンク処理の途中でエラーになると出力ファイルを生成しない。
このフラグをもちいると致命的でないエラーの場合には出力ファイルを残すよ
うに指定できる。

.TP
.B \-no\-keep\-memory
通常リンカはメモリ消費量よりも実行速度を優先するように最適化されている。
すなわち入力ファイルのシンボルテーブルがメモリにキャッシュされている。
このオプションを指定すると、メモリ消費を抑えるようにな
る (必要に応じてシンボルテーブルを読み直す)。このオプションは
大きな実行ファイルをリンクするとき、メモリを使い果たしてしまうよう
な場合に指定する必要がある。

.TP
.B \-no\-warn\-mismatch
何らかの理由でマッチしない入力ファイルをいっしょにリンクしようとすると、
リンカは通常エラーになります。この原因としては、
それらの入力ファイルが異なるプロセッサ用に、
あるいは異なるエンディアン用にコンパイルされたなどが考えられます。
このオプションを指定すると、リンカはこの種の潜在的なエラーを
黙って許可します。このオプションは不用意に使うべきではありません。
リンカのエラーをどうしても避けたいような、
特殊な作業を行っているときに限るべきです。

.TP
.BI "\-o " "output"
.I output
は 
.B ld
によって作成されるプログラムの名前である。このオプションが指定されなかっ
た場合は
.B a.out
がデフォルトとして用いられる。スクリプトコマンド
.B OUTPUT
でも出力ファイル名を指定できる。

.TP
.BI "\-oformat " "output\-format"
出力されるオブジェクトファイルのバイナリフォーマットを指定する。通常は
このオプションは必要ない。
.B ld
でのデフォルトの出力フォーマットは、それぞれのマシンで最も普通のフォー
マットになるように設定されているからである。
.I output-format
はテキスト文字列で、 BFD ライブラリでサポートされている特定のフォーマッ
トの名前である。スクリプトコマンド
.B OUTPUT_FORMAT
でも出力フォーマットを指定できる。しかしこのオプションはスクリプトでの
指定を上書きする。

.TP
.BI "\-R " "filename"
シンボル名とそれらのアドレスを
.I filename
から読み込む。しかしそれらのリロケートや出力への追加は行わない。これに
よって出力ファイルでは、(他のプログラムで定義された) メモリ上の絶対ア
ドレスをシンボルを用いて参照できることになる。

.TP
.B \-relax
機能はマシンに依存する。現在では H8/300 でのみサポートされている。

プラットフォームによっては、このオプションを指定するとグローバルな最適
化を行う場合もある。これはリンカがプログラムのアドレスを置き換える (出
力されるオブジェクトファイルのアドレスモードを relax させたり新しい命
令を同期させる) 場合に可能となる。

サポートされていないプラットフォームでは、
.B \-relax
は受け付けられるが何も起こらない。

.TP
.B \-r 
リロケータブルな出力を生成する。すなわち再び
.B ld
の入力として用いることができるようなファイルを生成する。これはしばしば
部分 (\fIpartial\fP) リンクと呼ばれる。また標準 Unix の
マジック・ナンバーをサポートする環境では、このオプションは出力ファイル
のマジック・ナンバーを
.B OMAGIC
にする。このオプションが指定されなかった場合は、完全なファイルが生成さ
れる。 C++ プログラムをリンクする場合、このオプションはコンストラクタ
への参照を解決\fIしない\fP。 C++ の場合には代わりに
.B \-Ur
を用いることができる。

このオプションは
.B \-i
と同じ。

.TP
.B \-rpath\ \fIdirectory
ディレクトリを実行時ライブラリの検索パスに追加する。これは ELF の実
行ファイルを共有オブジェクトとリンクするときに用いられる。
.B \-rpath
の引き数は全て結合され、ダイナミックリンカに渡される。ダイナミックリン
カは、これを用いてロードする共有オブジェクトを実行時に決定する。
.B \-rpath
オプションはリンクに明示的に含まれている共有オブジェクトによって必要と
される別の共有オブジェクトを指定するのに用いることもできる。
.B \-rpath\-link
オプションの説明を見よ。 ELF 実行ファイルの
.B \-rpath
が指定されない場合には、 (指定されていれば) 環境変数
.B LD_RUN_PATH
の値が用いられる。

.B \-rpath
オプションは SunOS で用いることもできる。 SunOS のデフォルトでは、リン
カは実行時の検索パスを
.B \-L
オプションで与えられたパスから生成する。
.B \-rpath
が用いられると、実行時の検索パスは
.B \-rpath
オプションで与えられたパスのみから生成され、
.B \-L
オプションは無視される。これは gcc を使っていて、
.B \-L
がたくさん指定されてしまう (これらは NFS マウントされたファイルシ
ステムかもしれない) 場合などに便利である。

.TP
.B \-rpath\-link\ \fIdirectory
ELF か SunOS を用いている場合、ある共有ライブラリが別の共有ライブラリ
を必要とする場合がある。これは
.B ld\ \-shared
によるリンクで入力ファイルに共有ライブラリが含まれている場合に起こる。

リンカが非共有 (非リロケータブル) なリンクを行っているときに、このよう
な依存関係に遭遇すると、リンカは自動的にその必要とされている共有ライブ
ラリも (明示されていなくても) リンクしてしまおうとする。このような場合
に
.B \-rpath\-link
オプションは検索する最初のディレクトリセットを指定する。
.B \-rpath\-link
オプションではディレクトリ名の並びをコロンで区切って一度に指定すること
もできるし、複数回用いて指定することもできる。

必要な共有ライブラリが見つからないと、リンカは警告を出してリンク処理を
継続しようとする。

.TP
.B \-S 
出力ファイルからデバッガのシンボル情報を削除する (全てのシンボルではな
い)。

.TP
.B \-s 
出力ファイルから全てのシンボル情報を削除する。

.TP
.B \-shared
共有ライブラリを生成する。現在のところ ELF と SunOS プラットフォームで
のみサポートされている (実際には SunOS では不要である。なぜならリンカ
は未定義シンボルが存在していたり
.B \-e
オプションが指定されている場合には自動的に共有ライブラリを生成するから
である)。

.TP
.B \-sort\-common
通常
.B ld
がグローバルな共通シンボルをそれぞれの出力セクションに配置するにあたっ
ては、それらはサイズによってソートされる。まず 1 バイト変数のシンボル、
ついで 2 バイト、 4 バイト変数のシンボル、最後にそれ以外のものが並ぶ。
このオプションはアラインメントによって生じてしまうシンボル間のギャップ
を防止する。このオプションはソートを行わないようにする。

.TP
.B \-split\-by\-reloc\ \fIcount
出力ファイルに余分なセクションを生成して、ファイル中のそれぞれの出力セ
クションが
.I count
以上のリロケーションを含まないようにする。これは COFF オブジェクトファ
イルフォーマットの巨大なリロケータブルファイルを、リアルタイムカーネル
にダウンロードする場合などに役に立つ。 COFF はセクションあたり 65535 
以上のリロケーションを持てないからである。任意のセクションをサポートし
ていないフォーマットでは、このオプションは機能しないことに注意。リンカ
はそれぞれの入力セクションを分割して再配置するわけではない。したがって
入力ファイルのセクションに
.I count
以上のリロケーションを含むものがあれば、それに対応してそれだけのリロケー
ションを持った出力セクションは作成されてしまう。

.TP
.B \-split\-by\-file
.B \-split\-by\-reloc
と似ているが、それぞれの入力ファイルに対して新たな出力セクショ
ンを生成する。

.TP
.BI "\-Tbss " "org"\c
.TP
.BI "\-Tdata " "org"\c
.TP
.BI "\-Ttext " "org"\c
それぞれ出力ファイルの \fBbss\fP、 \fBdata\fP、 \fBtext\fP セグメント
に対して
.I org
を開始アドレスにする。
.I org
は 16 進の整数でなければならない。

.TP
.BI "\-T " "commandfile"
.B \-c \c
.I commandfile
と等価である。他のツールとの互換性のために用意された。

.TP
.B \-t 
入力ファイルを
.B ld
が処理するごとに、ファイルの名前を表示する。

.TP
.BI "\-u " "sym"
.I sym
を出力ファイルに未定義なシンボルとして挿入する。例えばこれは、標準ライ
ブラリから付加的なモジュールをリンクするトリガに使うことができる。
.B \-u
は必要な未定義シンボルの数だけ繰り返すことができる。

.TP
.B \-Ur 
C++ プログラム以外では、このオプションは
.B \-r
と等価であり、リロケータブルな出力を生成する (つまり再び
.B ld
の入力ファイルに用いることのできるファイルを出力する)。
C++ プログラムをリンクする際には、
.B \-Ur
は
.B \-r
と異なり、コンストラクタへの参照を解決する。

.TP
.B \-\-verbose
.B ld
のバージョン番号を表示し、サポートされているエミュレーションをリストす
る。入力ファイルがそれぞれオープンできるかどうかも表示する。

.TP
.B \-v, \-V
.B ld
のバージョン番号を表示する。
.B \-V
はサポートされているエミュレーションもリストする。

.TP
.B \-\-version
.B ld
のバージョン番号を表示して終了する。

.TP
.B \-warn\-common
共通シンボルが他の共通シンボルやシンボル定義と結合されている場合に警告
を発する。 Unix のリンカはこの点には比較的寛容であるが、他の OS のリン
カにはそうでないものもある。このオプションはグローバルシンボルを結合す
ることによって生じる問題点を見つける手がかりになるかもしれない。

.TP
.B \-warn\-constructors
グローバルコンストラクタが用いられたら警告を発する。これが意味を持つオ
ブジェクトファイルフォーマットは少ない。 COFF や ELF では、リンカはグ
ローバルコンストラクタを検出することができない。

.TP
.B \-warn\-multiple\-gp
出力ファイルに複数のグローバルなポインタ値が必要な場合に警告を発する。
このオプションが意味を持つのは、 Alpha のような特殊なプロセッサだけで
ある。

.TP
.B \-warn\-once
未定義シンボルに関する警告をシンボルごとに一度だけにする。デフォルトで
はそのシンボルを参照するモジュール一つについて一回警告が出る。

.TP
.B \-warn\-section\-align
出力セクションのアドレスがアラインメントのために変更された場合に
警告を出す。通常アラインメントは入力セクションによって設定される。
アドレスは明示的に指定されなかった場合 (つまり SECTIONS コマンドが
セクションのスタートアドレスを指定しなかった場合) にのみ変更されうる。

.TP
.B \-\-whole\-archive
コマンドラインでこのオプション以降に指定されたそれぞれの書庫に対して、
書庫内部の全てのオブジェクトファイルをリンクする (デフォルトでは書庫か
ら必要なオブジェクトファイルを検索する)。これは通常書庫ファイルを共有
ライブラリに変えるとき、内部のオブジェクトを全て共有ライブラリに含め
るために指定される。

.TP
.B \-\-no\-whole\-archive
コマンドラインでこのオプション以降に現われる書庫に対して
.B \-\-whole\-archive
オプションの効果を無効にする。

.TP
.BI "\-\-wrap " "symbol"
.I symbol
に対してラッパ機能を用いる。
.I symbol
への未定義な参照は全て
.BI "__wrap_" "symbol"
として解決される。また
.BI "__REAL_" "symbol"
への未定義な参照はすべて
.I symbol
として解決される。

.TP
.B \-X 
一時的なローカルシンボルをすべて削除する。ほとんどのターゲットでは、これは
`\fBL\fP' で始まるローカルシンボルを意味する。

.TP
.B \-x
ローカルシンボルを全て削除する。
.PP

.SH 環境変数
.B ld
の動作は環境変数
.B GNUTARGET
によって変更することができる。

.B GNUTARGET
は \fB\-b\fP (または等価なオプション \fB\-format\fP) を用いない場合の
入力ファイルのオブジェクトフォーマットを定義する。この値は入力フォーマッ
トに対して有効な BFD 名の一つでなければならない。
.B GNUTARGET
が \fBdefault\fP に設定されていた場合には、 BFD は入力されるバイナリファ
イルを調べて入力フォーマットを決定しようとする。これは通常は成功するが、
決定できない可能性もある。オブジェクトファイルフォーマットで用いられて
いるマジック・ナンバーが一意であることを保証する方法は存在しないからで
ある。しかし BFD をそれぞれのシステムで設定する際には、そのシステムに
一般的なフォーマットが検索リストの最初の方に置かれる。したがって複数
フォーマットの可能性が存在した場合には、より一般的なフォーマットとして
解釈される。
.PP

.SH 関連項目

.BR objdump ( 1 )
.br
.br
.B info
の `\fBld\fP' および `\fBbinutils\fP' エントリ
.br
.I "ld: the GNU linker"
, Steve Chamberlain and Roland Pesch;
.I "The GNU Binary Utilities"
, Roland H. Pesch

.SH 著作権
Copyright (c) 1991, 1992 Free Software Foundation, Inc.
.PP
Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.
.PP
Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.
.PP
Permission is granted to copy and distribute translations of this
manual into another language, under the above conditions for modified
versions, except that this permission notice may be included in
translations approved by the Free Software Foundation instead of in
the original English.
