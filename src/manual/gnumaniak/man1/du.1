.\" Copyright Andries Brouwer, A. Wik 1998, Ragnar Hojland Espinosa 1998-2002
.\"
.\" This file may be copied under the conditions described
.\" in the LDP GENERAL PUBLIC LICENSE, Version 1, September 1998
.\" that should have been distributed together with this file.
.\"
.\" Japanese Version Copyright (c) 1999-2003 Yuichi SATO
.\"         all rights reserved.                                   
.\" Translated Sun Oct 17 18:05:20 JST 1999
.\"         by Yuichi SATO <sato@complex.eng.hokudai.ac.jp>
.\" Updated & Modified Sun Feb 23 00:55:58 JST 2003
.\"         by Yuichi SATO <ysato444@yahoo.co.jp>
.\" 
.\"WORD:	report		表示する
.\" 
.TH DU 1 "18 June 2002" "GNU fileutils 4.1"
.SH 名前
du \- ファイルのディスク使用量を見積もる
.SH 書式
.BI "du [" options "] [" file... ]
.sp
POSIX オプション:
.B [\-askx]
.sp
GNU オプション (簡略形式):
.B [\-abchklmsxDHLS] [\-X \fIFILE\fB]
.B [\-\-block\-size=\fISIZE\fB] [\-\-max\-depth=\fIDEPTH\fB]
.B [\-\-exclude=\fIPATTERN\fB]
.B "[\-\-help] [\-\-version] [\-\-]"
.SH 説明
.B du
はディスクの使用量を表示する。
対象は指定したファイルと、
それをルート (根) とする階層中にある全ディレクトリである。
ここで「ディスク使用量」とは、指定したファイル以下の
全ファイル階層による使用量を意味する。
.PP
引き数がない場合、
.B du
は現在のディレクトリのディスク使用量を表示する。
.SH "POSIX 詳細"
出力はデフォルトでは 512 バイト単位であるが、
\-k オプションが指定された場合は 1024 バイト単位になる。
.SH "POSIX オプション"
.TP
.B "\-a"
ディレクトリだけでなく、全てのファイルについて容量を表示する。
.TP
.B "\-k"
デフォルトの 512 バイト単位の代わりに 1024 バイト単位を使用する。
.TP
.B "\-s"
実際に引き数で指定された対象による使用量のみを表示し、
そのサブディレクトリによる使用量は表示しない。
.TP
.B "\-x"
引き数で指定されたファイルと同じディバイス上のみで使用量を集計する。
.SH "GNU オプション"
.TP
.B "\-a, \-\-all"
ディレクトリだけでなく、全てのファイルについて容量を表示する。
.TP
.B "\-b, \-\-bytes"
デフォルトのブロックサイズを無視し、バイト単位でサイズを表示する。
.TP
.B "\-c, \-\-total"
全ての引き数について使用量表示の処理をした後、
全ての引き数の使用量の総計を表示する。
このオプションは、ファイル・ディレクトリのセットを与え、
それらのディスク総使用量を調べるために使用される。
.TP
.B "\-h, \-\-human\-readable"
それぞれのサイズに、
例えばメガバイトなら \fBM\fR のようなサイズ文字を付加する。
10 の累乗ではなく 2 の累乗を用いるので、
\fBM\fR は 1,048,576 バイトを表す。
.TP
.B "\-k, \-\-kilobytes"
サイズをキロバイト単位で表示する。
.TP
.B "\-l, \-\-count\-links"
あるファイルが (ハードリンクとして) 既に集計されている場合を含め、
全てのファイルの使用量を集計する。
.TP
.B "\-m, \-\-megabytes"
メガバイト (1,048,576 バイト) 単位でサイズを表示する。
.TP
.B "\-s, \-\-summarize"
それぞれの引き数について、総計のみを表示する。
.TP
.B "\-x, \-\-one\-file\-system"
引き数で指定されたファイルのあるファイルシステムとは異なる
ファイルシステム上にあるディレクトリを集計に含めない。
.TP
.B "\-D, \-\-dereference\-args"
コマンドライン引き数で指定したシンボリックリンクをたどる。
他のシンボリックリンクはたどらない。
このオプションは、たいていシンボリックリンクになっている
.IR /usr/tmp
のようなディレクトリのディスク使用量を調べるのに便利である。
.TP
.B \-H, \-\-si
それぞれのサイズに、
例えばメガバイトなら \fBM\fR のようなサイズ文字を付加する
(SIとは国際単位系のことで、これらの文字を接頭辞と定義している)。
2 の累乗ではなく 10 の累乗を用いるので、
\fBM\fR は 1,000,000 バイトを表す。
.TP
.B "\-L, \-\-dereference"
シンボリックリンクをたどる (シンボリックリンク自体が使用する容量の代わりに、
リンク先のファイルやディレクトリの使用量を表示する)。
.TP
.B "\-S, \-\-separate\-dirs"
サブディレクトリの使用量を含めずに、
個々のディレクトリの使用量を分けて表示する。
.TP
.B \-X \fIFILE\fB, \-\-exclude\-from=\fIFILE
\fB\-\-exclude\fR と類似するが、
除外するためのパターンを \fIFILE\fR から一行ずつ取り込む。
\fIFILE\fR が `\fB-\fR' のときはパターンを標準入力から読み込む。
.TP
.B \-\-block\-size=\fISIZE
環境変数の値を無視し、ブロックサイズを \fISIZE\fR に設定する。
.TP
.B \-\-exclude=\fIPATTERN
再帰的に集計する際、\fIPATTERN\fR にマッチする名前の
サブディレクトリやファイルを除外する。
`du \-\-exclude='*~'' の場合には `~' で終わる名前のファイルは除外される。
.TP
.B \-\-max\-depth=\fIDEPTH
階層のルートから深さレベルが最大 \fIDEPTH\fR までにある
各ディレクトリの (\fB\-all\fR が指定されている場合はファイルも含めた)
ディスク使用量の合計を表示する。
ルートはレベル 0 であるので、`du \-\-max\-depth=0' は `du \-s' と等しい。
.SH "GNU 標準オプション"
.TP
.B "\-\-help"
標準出力に使用方法のメッセージを出力して正常終了する。
.TP
.B "\-\-version"
標準出力にバージョン情報を出力して正常終了する。
.TP
.B "\-\-"
オプションリストの終りを示す。
.SH バグ
BSD システムでは、HP-UX システムから NFS マウントしたファイルに対して、
.B du
は正しい値の半分の値を表示してしまう。
HP-UX システムでは、BSD システムから NFS マウントした
ファイルに対して、正しい値の 2 倍の値を表示してしまう。
これは HP-UX の欠陥によるもので、HP-UX の 
.B du
プログラムにも影響を及ぼしている。
.SH ブロックサイズ
デフォルトの出力ファイルブロックサイズは
1024 バイト (\fBPOSIXLY_CORRECT\fRが設定されているときは 512 バイト) である。
この値は以下の環境変数のどれかを設定することで変更できる。
また、これらの環境変数の値は \fB\-\-block\-size=\fISIZE\fR が
オプションに与えられると無視される。
.TP
優先順位：
.BR DU_BLOCK_SIZE ", " BLOCK_SIZE ", " POSIXLY_CORRECT .
.PP
これらの変数の値は、数字でも \fBhuman\-readable\fR でも \fBsi\fR でもよい。
数字の後には、何倍であるかを指定するサイズ文字と、
通常のバイトを選択する \fBB\fR または
10 進の「商業用」バイトを選択する \fBD\fR を続けてもよい。
たとえば、`BLOCK_SIZE=1KB' は `BLOCK_SIZE=1024' に等しく、
`BLOCK_SIZE=1KD' は `BLOCK_SIZE=1000' に等しい。

以下の文字が認識される 
(また \fB\-\-human\-readable\fR と 
\fB\-\-si\fR オプションで表示されるときに用いられる)
.TP
.B k
キロ: \fB\-\-human-readable\fR なら 2^10 = 1024、
\fB\-\-si\fR なら 10^3 = 1000 
.TP
.B M
メガ: 2^20 = 1,048,576 または 10^6 = 1,000,000
.TP
.B G
ギガ: 2^30 = 1,073,741,824 または 10^9 = 1,000,000,000
.TP
.B T
テラ: 2^40 = 1,099,511,627,776 または 10^12 = 1,000,000,000,000
.TP
.B P
ペタ: 2^50 = 1,125,899,906,842,624 または 10^15 = 1,000,000,000,000,000
.TP
.B E
エクサ: 2^60 = 1,152,921,504,606,846,976 または 
10^18 = 1,000,000,000,000,000,000
.TP
.B Z
ゼタ: 2^70 = 1,180,591,620,717,411,303,424 または 10^21 =
1,000,000,000,000,000,000,000
.TP
.B Y
ヨタ: 2^80 = 1,208,925,819,614,629,174,706,176 または 10^24 =
1,000,000,000,000,000,000,000,000
.SH 環境変数
変数 DF_BLOCK_SIZE, BLOCK_SIZE, OSIXLY_CORRECT は
出力ファイルブロックサイズの選択を決定する。
変数 LANG, LC_ALL, LC_CTYPE, LC_MESSAGES が通常の意味を持つ。
.SH 準拠
POSIX 1003.2
.SH 注意
ディスク使用量は丸めの際に繰上げられ、空き容量は繰り下げられる。
.PP
このページは fileutils-4.1 パッケージの
.B du
コマンドについて説明したものである;
その他のバージョンでは少し違いがあるかもしれない。
修正や追加は aeb@cwi.nl, aw@mail1.bet1.puv.fi, ragnar@ragnar-hojland.com
宛にメールで連絡してください。
プログラムのバグについては bug-fileutils@gnu.org へ報告してください。
