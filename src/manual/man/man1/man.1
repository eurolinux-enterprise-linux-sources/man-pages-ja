.\"
.\" Generated automatically from man.1.in by the
.\" configure script.
.\"
.\" Man page for man (and the former manpath)
.\"
.\" Copyright (c) 1990, 1991, John W. Eaton.
.\"
.\" You may distribute under the terms of the GNU General Public
.\" License as specified in the README file that comes with the man 1.0
.\" distribution.  
.\"
.\" John W. Eaton
.\" jwe@che.utexas.edu
.\" Department of Chemical Engineering
.\" The University of Texas at Austin
.\" Austin, Texas  78712
.\"
.\" Many changes - aeb
.\"
.\" Japanese Version Copyright (c) 1996 Tanoshima Hidetohsi
.\"         all rights reserved.
.\" Dec 31, 1996   Tanoshima Hidetoshi <tano@sainet.or.jp> 
.\"
.\" Modified Thu Jan 29 01:52:36 JST 1998
.\"         by HANATAKA Shinya <hanataka@abyss.rim.or.jp>
.\"
.\" Updated Mon 6 Dec 1999 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\"
.\" Updated Tue Nov 14 22:52:03 JST 2000
.\"         by Yuichi SATO <sato@complex.eng.hokudai.ac.jp>
.\" Updated Tue Dec 18 10:09:17 JST 2001
.\"         by Yuichi SATO <ysato@h4.dion.ne.jp>
.\"
.TH man 1 "September 2, 1995"
.LO 1
.SH 名前
man \- オンラインマニュアルページを整形し表示する。
.br
manpath \- ユーザー個々のマニュアルページの検索パスを決める。
.SH 書式
.B man 
.RB [ \-acdfFhkKtwW ]
.RB [ --path ] 
.RB [ \-m 
.IR system ] 
.RB [ \-p 
.IR string ] 
.RB [ \-C 
.IR config_file ] 
.RB [ \-M 
.IR pathlist ]
.RB [ \-P
.IR pager ] 
.RB [ \-S 
.IR section_list ] 
.RI [ section ] 
.I "name ..."

.SH 説明
.B man
はオンラインマニュアルページ (man ページ) を整形し表示する。
.I section
を指定すると、
.B man
はそのセクションのみからマニュアルを探す。
通常、
.I name
は man ページの名前で、
典型的なものとしてはコマンド名・関数名・ファイル名などがある。
ただし、
.I name
にスラッシュ
.RB ( / ) 
が含まれていると、
.B man 
はファイルの指定であると解釈する。
したがって
.B "man ./foo.5"
と指定したり、
.B "man /cd/foo/bar.1.gz\fR\fP"
と指定することも可能である。
.PP
man ページファイルを検索するディレクトリについての説明は、
以下を参照すること。

.SH オプション
.TP
.B \-\^C " config_file"
使用する設定ファイルを指定する。デフォルトは
.B /usr/lib/man.conf
である
.RB ( man.conf (5)
を見よ)。
.TP
.B \-\^M " path"
man ページを探すディレクトリのリストを指定する。
ディレクトリをコロンで区切って指定する。
リストが空の場合は、
.B \-M
を指定しないのと同じである。
.RB 「 "MAN ページの検索パス" 」
を参照すること。
.TP
.B \-\^P " pager"
使用するページャーを指定する。
このオプションは環境変数
.B MANPAGER
より優先される。さらにこの環境変数は
.B PAGER
よりも優先される。デフォルトでは
.B man
は
.B "/usr/bin/less -is"
を用いる。
.TP
.B \-\^S " section_list"
マニュアルを探すセクションを指定するコロン区切りのリスト。
このオプションは環境変数
.B MANSECT
より優先される。
.TP
.B \-\^a
デフォルトでは、man は見つかった最初の man ページを表示
したあと終了する。このオプションを使うと、
.B man
は最初にみつかったものだけでなく
.B name
にマッチしたすべてのページを表示する。
.TP
.B \-\^c
最新の cat 形式のページがあっても man ページのソースを
整形しなおす。このオプションは cat ページが端末と違った幅で
整形されているときや壊れている場合などに有用である。
.TP
.B \-\^d
man ページを表示せず、大量のデバッグ情報を出力する。
.TP
.B \-\^D
デバッグ情報と man ページの両方を表示する。
.TP
.B \-\^f
.B whatis
コマンドと同じ。
.TP
.BR \-\^F " または " \-\-preformat
フォーマットのみ行い、表示はしない。
.TP
.B \-\^h
ヘルプメッセージを表示して終了する。
.TP
.B \-\^k
.B apropos
コマンドと同じ。
.TP
.B \-\^K
「全ての」man ページから指定した文字列を探す。警告: これは
非常に遅いので セクションを指定した方が良い。
(だいたいの目安として、私のマシンでは
500 ページを検索するのに 1 分かかる。)
.TP
.B \-\^m " system"
別のシステムのことを記述した man ページ群を検索するように指定する。
.TP
.B \-\^p " string"
.B nroff
や 
.B troff
のまえに実行するプリプロセッサの順番を指定する。
インストールの状態によってはフルセットの
プリプロセッサが用意されてないかもしれない。いくつ
かのプリプロセッサとそれを指し示す文字は次のとおり：
eqn (e), grap (g), pic (p), tbl (t), vgrind (v), refer (r)。
このオプションは環境変数
.B MANROFFSEQ
より優先される。
.TP
.B \-\^t
man ページの整形に
.B /usr/bin/groff \-Tps \-mandoc
を使い、
.B stdout
に出力する。
.B /usr/bin/groff \-Tps \-mandoc
からの出力は印刷するまえになんらかのフィルターなどを通す必要
があるかもしれない。
.TP
.B \-\^w \fRまたは\fP \-\-path
実際には man ページを表示せず、
フォーマットされるページや表示されるファイルの位置を表示する。
引数を与えないと
.B man
が man ページを検索するディレクトリのリストを標準出力に表示する。
.B manpath
が man にリンクされているときは "manpath" は "man --path" と
同じになる。
.TP
.B \-\^W
\-\^w に似ているが、ファイル名を追加情報なしに 1 行に 1 つずつ表示する。
これはシェルから
.ft CW
.B "man -aW man | xargs ls -l"
.ft
などと使うと便利である。

.SH "CAT ページ"
.B man
コマンドはすでに整形された man ページを、
次にそのページが必要になったときの整形時間の節約のために保存しようとする。
伝統的に、DIR/manX の整形済みマニュアルは DIR/catX に
セーブされるが、
man ディレクトリから cat ディレクトリへのマッピング方法として、異なる値を
.B /usr/lib/man.conf
に指定することもできる。
フォーマットされた cat ページの 1 行の文字数が 80 文字でない場合、
cat ページはセーブされない。
man.conf に NOCACHE と書かれている場合、
cat ページはセーブされない。
.PP
.B man
コマンドをユーザー man に suid することができる。
そうすると、 cat ディレクトリのオーナーが man かつモードが 0755
(ユーザー man だけが書き込み可) で、
cat ファイルのオーナーが man かつモードが 0644 または 0444
(ユーザー man だけが書き込み可、またはユーザーすべてが書き込み不可)
のとき、
普通のユーザーは cat ページを変更したり、
他のファイルを cat ディレクトリに置いたりすることができなくなる。
man コマンドが suid されていなければ、
すべてのユーザーが cat ページを cat ディレクトリに置けるように、
cat ディレクトリのモードを 0777 にする必要がある。
.PP
cat ページがあったとしても、オプション
.B \-c
をつけると強制的に man ページを再整形する。
.SH "MAN ページの検索パス"
.B man
はマニュアルページを見付けるために洗練された方法を用いる。
これには、起動オプション・環境変数・設定ファイル
.B /usr/lib/man.conf
・プログラムに組み込まれているこれまでの慣例的な検索法や
発見的な方法が使われる。
.PP
まず最初に
.B man
の引き数
.I name
にスラッシュ
.RB ( / )
がある場合は、
.B man
はファイルの指定であると解釈して、検索を行わない。
.PP
ただし、
.I name
にスラッシュが含まれていない通常の場合、
.B man
は指定された名前のマニュアルページになるファイルを
いろいろなディレクトリで検索する。
.PP
.BI "-M " pathlist
オプションを指定する場合、
.I pathlist 
は
.B man 
が検索を行うディレクトリのリストであり、
ディレクトリをコロンで区切って指定する。
.PP
.B -M
オプションを指定していないが、環境変数
.B MANPATH
は設定してあるという場合、この環境変数の値は
.B man
が検索を行うディレクトリのリストである。
.PP
.B -M
または
.B MANPATH 
でパスのリストを明示的に指定していない場合、
.B man
は設定ファイル
.B /usr/lib/man.conf 
の内容に基づいてパスのリストを作成する。
設定ファイルの
.B MANPATH
ステートメントにより、特定のディレクトリを検索パスに追加する。
.PP
さらに、
.B MANPATH_MAP 
ステートメントは、コマンド検索パス
(すなわち、ユーザーの
.B PATH 
環境変数) に応じた検索パスを追加する。
コマンド検索パスにある各ディレクトリに対して、
1 つの
.B MANPATH_MAP
で 1 つのディレクトリを指定し、
man ページファイルの検索パスに追加する。
.B man
は
.B PATH
変数を調べて、対応するディレクトリを man ページファイルの検索パスに追加する。
よって、
.B MANPATH_MAP
を正しく使っている場合に
.B "man xyz"
を実行すれば、コマンド
.B xyz
を実行したときに動作するプログラムの man ページが得られる。
.PP
また、コマンド検索パスの各ディレクトリ
(「コマンドディレクトリ」と呼ぶことにする) に対して、
.B MANPATH_MAP 
ステートメントが\fIない\fR場合、
.B man
は「近接する」マニュアルページディレクトリを自動的に検索する。
近接するディレクトリとは、コマンドディレクトリ自身のサブディレクトリや、
コマンドラインディレクトリの親ディレクトリのサブディレクトリである。
.PP
「近接」ディレクトリの自動検索を無効にするには、
.B NOAUTOPATH
ステートメントを
.B /usr/lib/man.conf
に入れればよい。
.PP
上記の検索パスにある各ディレクトリについて、
.B man
は
.IB topic . section\fR,
という名前のファイルを探す。
これにはオプションとしてセクション番号と
圧縮ファイルの拡張子が付いてもよい。
このようなファイルが見付からない場合、
.BI man N
または
.BI cat N
という名前の全てのサブディレクトリを検索する。
ここで
.I N
は man ページのセクション番号である。
ファイルが
.BI cat N
サブディレクトリにある場合、
.B man
はフォーマット済みの man ページファイル (cat ページ) であると仮定する。
それ以外の場合、
.B man
は未フォーマットの man ページであると仮定する。
どちらの場合でも、ファイル名に
.RB ( .gz 
のような) 既知の圧縮ファイル拡張子が付いていれば、
.B man
は gzip されたファイルであると仮定する。
.PP
.B man
が特定のトピックの man ページを
どこで見付けるか (または見付けることができるのか) を知りたいときは、
.BR "--path " ( -w )
オプションを使うこと。
.SH 環境変数
.TP
.B MANPATH
.B MANPATH
を設定すると、
man ページファイルを探すときのパスとして使われる。
この環境変数は設定ファイルや自動的に指定される検索パスの設定を上書きするが、
起動オプション
.B -M
で上書きされる。
.RB 「 "MAN ページの検索パス" 」
を参照すること。
.TP
.B MANPL
.B MANPL
を設定すると、表示する 1 ページ当たりの行数として使われる。
この環境変数を設定しない場合、man ページ全体で (長い) 1 ページになる。
.TP
.B MANROFFSEQ
.B MANROFFSEQ
を設定すると、
.B nroff
や
.B troff
の前に実行するプリプロセッサが、この値をもとにして決定される。
デフォルトでは、man ページは 
.B nroff 
のまえに tbl 用のプリプロセッサに通される。
.TP
.B MANSECT
.B MANSECT
を設定すると、どのマニュアルセクションを探すかが
この値をもとにして決定される。
.TP
.B MANWIDTH
.B MANWIDTH
を設定すると、その値を表示する man ページの幅として使用する。
指定しなかった場合には画面の幅一杯まで使用する。
.TP
.B MANPAGER
.B MANPAGER
を設定すると、man ページを表示するプログラムとして使用する。
指定しなかった場合には、
.B PAGER
が使用される。どちらも設定されていない場合には
.B /usr/bin/less -is
が使われる。
.TP
.B LANG
.B LANG
を設定すると、
.B man
コマンドはまずその名前のサブディレクトリから man ページを探す。
したがってコマンドラインから 'LANG=dk man 1 foo'
と打つと、
.B man
コマンドはまず .../dk/man1/foo.1 を探し、
見つからなければ .../man1/foo.1
を探す。この ... はサーチパスのディレクトリである。
.TP
.B "NLSPATH, LC_MESSAGES, LANG"
環境変数
.B NLSPATH
と
.B LC_MESSAGES
(後者が指定されていなければ
.BR LANG )
はメッセージカタログの位置を指定する。
(英語のメッセージはコンパイル時に組み込まれているので、
英語のカタログは必要ない)
man に呼び出される
.BR col (1)
のようなプログラムも、たとえば LC_CTYPE
などを使うことに注意すること。
.TP
.B PATH
.B PATH
は man ページのデフォルト検索パスの決定に利用される。
.RB 「 "MAN ページの検索パス" 」
を参照すること。
.TP
.B SYSTEM
.B SYSTEM
はデフォルトのシステム名を得るのに使われる
.RB ( \-m
オプションと一緒に使うものと同じ) 
.SH 関連項目
.BR apropos (1),
.BR whatis (1),
.BR less (1),
.BR groff (1),
.BR man.conf (5).
.SH バグ
.B \-t
オプションは troff ライクなプログラムがインストールされている
場合のみ有効である。
.br
もしハイフンのかわりに、点滅する \e255 や <AD> が表示された場合には
環境変数に 'LESSCHARSET=latin1' を設定すると良い。
.PP
(訳注: 日本語を使用する場合には 
\&'JLESSCHARSET=japanese-euc' または 'LESSCHARSET=japanese-euc'
を使用するために、この方法では対応できない。groff のオプションで
\-Tnippon また \-Tascii を使用すること。)
.SH ウラ技
  (global-set-key [(f1)] (lambda () (interactive) (manual-entry (current-word))))

という行を自分の
.IR .emacs
ファイルに追加しておけば、F1 を叩くと、
現在のカーソル位置にあるライブラリコールの
man ページが表示される。
.LP
バックスペースとアンダースコアがない
プレーンテキスト版の man ページを得るには、コマンド

  # man foo | col -b > foo.mantxt

を実行すること。
.SH 訳注
本 man ページの各ファイルのパスは、man-1.5j で
.IP
configure +fsstnd
.PP
することによって得られたものです。
実際のパスはディストリビューションなどによって
異なっている可能性があります。
