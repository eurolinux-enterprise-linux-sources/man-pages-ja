.\" @(#)mpg123.1 0.01 21-Apr-1997 OF; from mpg123 archive
.\"
.\" Translated Wed Aug 18 22:36:46 JST 1999
.\"         by FUJIWARA Teruyoshi <fujiwara@linux.or.jp>
.\"
.TH mpg123 1 "21 Apr 1997"
.SH 名前
mpg123 \- MPEG 1.0/2.0 形式のオーディオファイルの演奏 (レイヤ 1, 2, 3 対応)
.SH 書式
.B mpg123
[
.B \-tscvqy01m24
]
[
.BI \-b " size"
]
[
.BI \-k " num"
]
[
.BI \-n " num"
]
[
.BI \-f " factor"
]
[
.BI \-r " rate"
]
[
.BI \-g " gain"
]
[
.BI \-a " dev"
]
[
.BR "\-o s" " | " "\-o h" " | " "\-o l"
]
[
.BI \-d " n"
]
[
.BI \-h " n"
]
[
.BI \-p " proxy"
]
[
.BI \-@ " file"
]
.IR file " ... | " URL " ... | "
.B \-
.SH 説明
.B mpg123
は
.IR file
や
.IR URL
を読み込み(いずれも複数指定可。また``\-'' を指定すると標準入力から読
み込みます)、これらをオーディオデバイスで演奏するか(デフォルトの動作)、
標準出力に出力します。
.IR file\^ / URL
は MPEG-1/2 のオーディオビットストリームであるものとします。
.SH オプション
.B mpg123
のオプションは、伝統的な POSIX 形式でも GNU 形式の長いオプション名でも
指定できます。POSIX 形式のオプションは ``\-'' で始まり、GNU 形式の
オプションは ``\-\^\-'' で始まります。
.TP
.BR \-t ", " \-\^\-test
テストモード。オーディオストリームをデコードしますが、出力は行いません。
.TP
.BR \-s ", " \-\^\-stdout
デコードしたオーディオのサンプル音を標準出力に出力します。
オーディオデバイスを使った演奏は行いません。
お使いのハードウェアが
.BR mpg123
でサポートされていなければ、このオプションを使わなければなりません。
出力フォーマットは raw (ヘッダ無し)形式、16 ビット、ステレオの PCM オー
ディオデータであり、そのバイト順はホストに従います。
.TP
.BR \-c ", " \-\^\-check
フィルタレンジの違反をチェックし、これが起こるとフレームごとに報告しま
す。
.TP
.BR \-v ", " \-\^\-verbose
詳しいメッセージを出力するようにします。例えば、デコード中に
フレーム番号を表示します。
.TP
.BR \-q ", " \-\^\-quiet
静かに動作するようにします。診断メッセージを表示しなくなります。
.TP
.BR \-y ", " \-\^\-resync
入力ファイルでエラーが起きた場合に、再び同期を取ってデコートを継続しよ
うと試みます。ヘッダが特定の壊れ方をしている場合にも回復を試みます。
このオプションは、
.B mpg123
が通常 `Illegal header' と表示して処理をあきらめる壊れた MPEG ファイル
がある場合に役に立ちます。ただし、このオプションは慎重に使ってください。
MPEG ファイルに壊れた位置情報があると鋭い音や激しい音が鳴ることがある
ので、ボリュームが大きすぎるとスピーカーを傷めてしまうかもしれません。
.TP
.BR \-0 ", " \-\^\-single0 "; " \-1 ", " \-\^\-single1
チャンネル 0 (左)またはチャンネル 1 (右)だけをデコードします。
これらのオプションが使えるのは、ステレオの MPEG ストリームの場合だけで
す。
.TP
.BR \-m ", " \-\^\-singlemix
両方のチャンネルを合成します。このオプションが使えるのは、ステレオの 
MPEG レイヤ-3 ストリームの場合だけです。CPU に負荷がかかる負荷は
フルステレオでデコードするよりも小さくなります。
.TP
.BR \-2 ", " \-\^\-2to1 "; " \-4 ", " \-\^\-4to1
2:1 (22kHz) または 4:1 (11kHz) の割合で出力ストリームの
ダウンサンプリングを行います。CPU の負担は小さくなりますが、少なくとも 
4:1 のダウンサンプリングを行うとまともに聞けない音になります。
.TP
\fB\-b \fIsize\fR, \fB\-\^\-buffer \fIsize
オーディオの出力バッファを
.I size
K バイト使用します。これは一時的にシステム動作が重くなった時の影響を回
避する際に便利です。というのも、このような状況ではオーディオ出力に割り
込みが入ることが通常だからです。
バッファのサイズには少なくとも 1024 (つまり 1MB。これは 6 秒分のオーディ
オデータに相当します)を指定すべきです。300 以下だとほとんど意味があり
ません。
デフォルト値は 0 (バッファリングが無効)です。
.TP
\fB\-k \fInum\fR, \fB\-\^\-skip \fInum
最初の
.I num
フレームを飛ばします。デフォルトではデコードは最初のフレームから行われ
ます。
.TP
\fB\-n \fInum\fR, \fB\-\^\-frames \fInum
.I num
フレームだけをデコードします。デフォルトでは、フレーム全てをデコードし
ます。
.TP
\fB\-f \fIfactor\fR, \fB\-\^\-scale \fIfactor
スケール係数を変更します(デフォルト値は 32768)。
.TP
\fB\-r \fIrate\fR, \fB\-\^\-rate \fIrate
サンプリングレートを設定します(デフォルトでは自動設定)。MPEG の
ストリームレートとは独立の固定のビットレートが必要ならば、この設定を変
更するとよいでしょう。mpg123 は自動的にレートを変換します。
このオプションは \-\-stereo または \-\-mono と組み合わせるべきでしょう。

.TP
\fB\-g \fIgain\fR, \fB\-\^\-gain \fIgain
オーディオハードウェアの出力ゲインを設定します
(デフォルトでは変更を行いません)。
.TP
\fB\-a \fIdev\fR, \fB\-\^\-audiodevice \fIdev
使用するオーディオデバイスを指定します。デフォルト値はシステム依存です
(普通は /dev/audio または /dev/dsp)。複数のオーディオデバイスがあり、
デフォルトのデバイスを使いたくない場合にこのオプションを使ってください。
.TP
.BR "\-o s" ", " \-\^\-speaker
オーディオ出力をスピーカーに送ります。
.TP
.BR "\-o h" ", " \-\^\-headphones
オーディオ出力をヘッドフォン端子に送ります。
.TP
.BR "\-o l" ", " \-\^\-lineout
オーディオ出力をラインアウト端子に送ります。
.TP
\fB\-d \fIn\fR, \fB\-\^\-doublespeed \fIn
.IR n
フレームおきにしか再生を行いません。これにより MPEG ストリームの再生は
.I n
倍速になり、特殊な効果を出すことができます。
.B \-\^\-halfspeed
オプションと組み合わせて 4 フレーム中の 3 フレームを演奏するといったこ
ともできます。ただし、このオプションを使う時は音質には期待しないでくだ
さい。
.TP
\fB\-h \fIn\fR, \fB\-\^\-halfspeed \fIn
各フレームを
.I n
回演奏します。これにより、MPEG ストリームの再生速度は
.IR 1 / n
になります(n 倍遅くなります)。これを使って特殊な効果を出すことができま
す。
.B \-\^\-doublespeed
オプションと組み合わせて 3 つごとのフレームの長さを倍にするといったこ
とが可能です。
ただし、このオプションを使う時は音質には期待しないでください。
.TP
\fB\-p \fIURL \fR| \fBnone\fR, \fB\-\^\-proxy \fIURL \fR| \fBnone
HTTP のリクエストの際に、指定された
.I proxy
を用います。
これは完全な URL (``http://ホスト名.ドメイン:ポート番号/'' の形式)で指
定しなければなりませんが、``http://'' プレフィックスとポート番号、最後
のスラッシュは省略してもかまいません(ポート番号のデフォルト値は 80)。
.B none
を指定すると、プロキシを使わずにそれぞれのサーバから直接ファイルを取得
します。``HTTP のサポート'' セクションも参照してください。
.TP
\fB\-u \fIauth\fR, \fB\-\^\-auth \fIauth
HTTP 経由でファイルを取得する際に用いる HTTP 認証を指定します。
指定は「ユーザ名:パスワード」の形式で行います。
.TP
\fB\-@ \fIfile\fR, \fB\-\^\-list \fIfile
コマンドラインで指定したファイルまたは URL (もしあれば)に加え、
.I file
に記述されているファイルや URL のオーディオストリームを読み込みます。
.I file
は通常ファイルでも適切なリストファイルを指す URL でも構いませんし、
ファイル名や URL のリストを標準入力から読み込むことを示す ``\-'' を指
定することもできます。
注意:
.B \-@ 
オプションは 1 回しか指定することができません(複数回指定すると、最後に
行った指定だけが認識されます)。
.TP
.BR \-z ", " \-\^\-shuffle
シャッフル演奏を行います。コマンドラインとリストファイルで指定された
ファイルをランダムにシャッフルします。
.TP
.BR \-\-stereo
強制的にステレオ出力にします。
.TP
.BR \-\-reopen
1 曲ごとにオーディオデバイスをオープンし直します。
.TP
.BR \-\-8bit
強制的に 8 ビット出力にします。
.TP
.BR \-Z ", " \-\-random
完全にランダムな演奏を行います。
.SH オペランド
.B mpg123
は以下のオペランドをサポートしています:
.TP 8
.IR file (複数可)
入力ファイルのパス名(複数個指定することもできます)。これは
MPEG-1/2 オーディオのレイヤ-1, 2, 3 の正しいビットストリームでなければ
なりません。
``\-'' を指定すると MPEG データは標準入力から読み込まれます。また、
``http://'' で始まる名前は全て
.I URL
として認識されます(次のセクションを参照してください)。
.SH HTTP のサポート
.B mpg123
は通常ファイルや標準入力から MPEG オーディオストリームを読み込むだけで
なく、HTTP プロトコル経由での MPEG オーディオファイルの取得もサポート
しています。このプロトコルは World Wide Web (WWW)で使われています。こ
のようなファイルはいわゆる URL (Universal Resource Locator) を用いて指
定します。URL は ``http://'' で始まります。このプレフィックスを持つ
ファイルがあると、
.B mpg123
はこのファイルを取得してデコードおよび再生を行うために、サーバに対する
HTTP 接続をオープンしようとします。
.P
WWW のキャッシュ、つまりいわゆるプロキシを通してファイルを取得すると便
利なこともよくあります。これを行うために、
.B mpg123
は環境変数
.BR MP3_HTTP_PROXY ", " http_proxy ", " HTTP_PROXY 
をここに挙げた順番で調べます。設定されている最初の変数の値がプロキシの
指定として使われます。これを上書きするには、コマンドラインオプションの
.B \-p
を用います(``オプション'' セクションを参照)。
.B "\-p none"
を指定すると、たとえ先に述べた環境変数が設定されていても、プロキシを全
く使わずに直接サーバと接続します。
.P
WWW サーバから取り寄せた MPEG オーディオを再生するには、サーバとの接続
が十分高速でなければならない点に注意してください。例えば
128k ビット/秒 の MPEG ファイルは、プロトコルのオーバーヘッドに加えて
少なくとも 128k ビット/秒(16k バイト/秒)のネットワーク接続を必要としま
す。ネットワークが一時的に止まることが原因で問題が起きる場合には、
.B \-b
オプション(バッファ容量設定)でネットワーク停止を避けてみましょう。
ネットワーク接続の全体的な速度が MPEG オーディオファイルのリアルタイム
演奏に十分でなければ、最初に(
.BR lynx (1)
等を用いて)ファイルをローカルのハードディスクにダウンロードしてからファ
イルを再生してください。
.P
.BR "\-u user:pass".
WWW サーバ上のファイルにアクセスするために認証が必要ならば、
.BR "\-u ユーザ名:パスワード"
を使って指定することができます。
.SH 割り込み
.B mpg123
は Ctrl-C を押すことにより、いつでも中断させることができます。複数のファ
イルの再生中であれば、現在のファイルの再生が止まり、次のファイルの再生
が始まります。次のファイルにスキップせずに即座に全ての再生を終えるには、
Ctrl-C を (約 1 秒以内に)2 回連続で押します。
.P
Ctrl-C を押しても聞こえる音がすぐ変わるわけではない点に注意してくださ
い。これはオーディオデバイス内にオーディオデータがバッファリングされて
いるためです。この遅れはシステムによって違いますが、普通は 1, 2 秒以内
です。
.SH 関連情報
.BR lynx (1),
.BR sox (1),
.BR intro (1)
.SH 注意
MPEG オーディオ(特にレイヤ-3)のデコードにはかなりの CPU 性能が必要です。
これをリアルタイムでデコードするには、少なくとも Pentium, Alpha,
SuperSparc あるいはこれらと同等のプロセッサでなければなりません。
ですが、
.B -singlemix
オプションを用いてモノラルのみの再生を行う方法もあります。このオプショ
ンを使うとレイヤ-3 ストリームに対する CPU 負荷がある程度小さくなります。
.BR \-2 " オプションと " \-4
オプションも参照してください。
.P
これ以外の問題が起きた場合には、
.B \-s
オプションを使ってデコード結果を標準出力に出力し、これをファイルに
リダイレクトしてください。そしてこのファイルを適切なユーティリティを使っ
て再生してください。
.B mpg123
の出力をお使いのオーディオプレイヤーで再生できるように変換するには、
.BR sox (1)
等のツールが必要となるかもしれません。
.P
.B mpg123
は必ず 16 ビットステレオのデータを生成する点にも注意してください(
.BR \-single *
オプション群のいずれかを使った場合でも、全く同じステレオチャンネルが 2 
つ生成されます)。お使いのハードウェアがこれ以外のフォーマット(例えば 8 
ビットモノラル)を要求するのなら、やはり
.BR sox (1)
等のコンバータが必要となります。
.P
お使いのシステムが普段は十分リアルタイム再生ができる速さでも、一時的に
システム負荷が高くなり(cron のジョブやユーザのリモートログイン、
「巨大な」プログラムの起動など)、オーディオ出力に割り込みがかかるよう
な場合には、
.B \-b
オプションを使って最低 1000K バイトのバッファを確保すべきです。
.SH バグ
.TP
既知のバグと制限事項:
.br
MPEG-2 のレイヤ 1, 2 のテストは行っていません。動作しないかもしれませ
ん。(レイヤ 3 は動作するはずです。)
.br
フリーフォーマットのストリームには対応していません。
.br
レイヤ 1 対応のテストは十分ではありません。
.br
CRC エラーのチェックは行っていません。
.br
現在は DEC Digital Unix, Ultrix, IBM AIX のオーディオハードウェアには
対応していません。したがって、これらのプラットフォームでは
.B \-s
オプションを使わなければなりません。
.SH 作者
.TP
リーダー:
.br
Michael Hipp <hippm@informatik.uni-tuebingen.de>
.TP
以下のコード(または少なくともアイディア)を利用しています:
.br
MPEG Software Simulation Group (基本パッケージ)
.br
Philipp Knirsch <phil@mpik-tueb.mpg.de> (DCT36/manual の展開)
.br
Tobias Bading <bading@cs.tu-berlin.de> (副バンドの合成)
.br
Jeff Tsay <ctsay@pasteur.eecs.berkeley.edu> (DCT36)
.br
Thomas Woerner (SGI のオーディオへの対応)
.br
Damien Clermonte <clermond@esiee.fr> (HP-UX のオーディオ用の修正)
.br
Oliver Fromme <oliver.fromme@heim3.tu-clausthal.de>
.P
インターネット上での参照ページ:
.br
http://www.sfs.nphil.uni-tuebingen.de/~hipp/mpg123.html
.br
http://www.heim3.tu-clausthal.de/~olli/mpg123/
.br
(mpg123 メーリングリストに関する情報があります)
.P
最新版は以下の場所からも入手できます:
.br
ftp.tu-clausthal.de:/pub/unix/audio/mpg123
.br
http://ftp.tu-clausthal.de/pub/unix/audio/mpg123
